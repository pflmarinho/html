(function(){'use strict';function AdsLazyLoad(){var triggerZone;var adContainers=document.querySelectorAll('.has-ad-lazyload');this.init=function(){this.setTriggerZone();this.watchTriggerZone();this.watchAdsVisibilty();};this.setTriggerZone=function(){triggerZone=screen.height*2;};this.watchTriggerZone=function(){var self=this;window.addEventListener('resize',this.throttle(self.setTriggerZone),false);};this.throttle=function(fn,threshhold,scope){threshhold||(threshhold=100);var last,deferTimer;return function(){var context=scope||this;var now=+new Date,args=arguments;if(last&&now<last+threshhold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args);},threshhold);}else{last=now;fn.apply(context,args);}};};this.watchAdsVisibilty=function(callback){for(var i=adContainers.length-1;i>=0;i--){window.ScrollSpy.add({el:adContainers[i],offset:triggerZone,ctx:this,callback:function(element){this.ctx.initBanner(element);}});}};this.initBanner=function(el){var that=this;whenAvailable('bannerLazyLoading',function(){that.defineBanner(el);});};this.defineBanner=function(element){var id=element.getAttribute('data-id');element.setAttribute('id',id);setTimeout(window.bannerLazyLoading(id),0);}
this.init();}
function whenAvailable(name,callback){var interval=50;var timer=function(){if(window[name]){callback();}else{window.setTimeout(timer,interval);}};window.setTimeout(timer,interval);};new AdsLazyLoad();})();