var VideoRecommendationPlugin=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={}}return r(e,[{key:"getParams",value:function(e){var t={skipImpressions:this.isSkippedImpression()};return Object.assign({},t,e)}},{key:"getLocationParams",value:function(){return{drawed:!0,countImpressions:!this.isSkippedImpression()}}},{key:"getHeaders",value:function(){return this.options.extraHeaders||[]}},{key:"getDict",value:function(){return this.options}},{key:"getTimeout",value:function(){var e=this.options.timeout;return void 0===e&&(e=1e3),e}},{key:"skipImpression",value:function(){return this.options.skipImpressions=!0,this}},{key:"timeout",value:function(e){return this.options.timeout=e,this}},{key:"isFieldSetted",value:function(e){return void 0!==e&&!1!==e}},{key:"isSkippedImpression",value:function(){return this.isFieldSetted(this.options.skipImpressions)}},{key:"addHeader",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),t.push(e),this.options.extraHeaders=t,this}},{key:"enableGADebugger",value:function(){return this.options.enableGADebugger=!0,this}},{key:"isEnabledGADebugger",value:function(){return this.isFieldSetted(this.options.enableGADebugger)}}],[{key:"validated",value:function(t){if(t instanceof e)return t;if(void 0===t)return new e;throw new TypeError("GloboABOptions não válido")}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(22),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t}return r(e,[{key:"oneWaySend",value:function(e,t,n,r){this.do("PUT",e,null,t,null,null,n,r)}},{key:"do",value:function(e,t,n,r,o,a){var s=this,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1e3,u="",f=i.interceptParams(t,n);for(var d in f)f.hasOwnProperty(d)&&(u+="&"+d+"="+f[d]);u&&(u="?"+u.substring(1));var p=this.abHost+t+u,h=this.createXHR();h.open(e,p,!0),h.timeout=l,h.onload=function(){h.status>=200&&h.status<400?s.callIfDefined(o,h):s.callIfDefined(a,s.handleError(h,p))},h.onerror=function(e){s.callIfDefined(a,s.handleError(e,p))},h.ontimeout=function(e){s.callIfDefined(a,s.handleError(e,p))},r&&(h.setRequestHeader("Content-Type","application/json;charset=utf-8"),r=JSON.stringify(r)),Object.keys(c).forEach(function(e){h.setRequestHeader(e,c[e])}),h.send(r)}},{key:"handleError",value:function(e,t){var n={};return n.type=e.type?e.type:"undefined",e.target instanceof XMLHttpRequest&&(e=e.target),e instanceof XMLHttpRequest?(n.status=e.status,n.url=t,n.timeout=e.timeout,n.msg=e.responseText):n.msg=e.toString(),n}},{key:"createXHR",value:function(){var e=new XMLHttpRequest;return e.withCredentials=!0,e}},{key:"callIfDefined",value:function(e,t){e&&e(t)}}]),e}();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window._gaq||[],i=t.CATEGORY="videos",o=function(e){var t=e.action,n=e.opt_label,o=void 0===n?null:n,a=e.opt_value,s=void 0===a?null:a;r.push(["_trackEvent",i,t,o,s,!0])},a=t.send=function(e){Array.isArray(e)?e.forEach(o):o(e)};t.sendClickCancelAutoplay=function(){a({action:"cancelar",opt_label:"clique | cancelar autoplay"})},t.sendImpressionAutoplay=function(){a({action:"impressao autoplay",opt_label:"impressao autoplay"})},t.sendStartAutoplay=function(){a({action:"start",opt_label:"autoplay"})},t.sendClickAutoplay=function(){a({action:"clique no autoplay",opt_label:"autoplay"})}},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.parseMilliseconds=function(e){var t=e/1e3,n=parseInt(t/60,10),r=parseInt(t%60,10);return n>=1?n+(r>30?1:0)+" min":parseInt(t,10)+" seg"},t.createElement=function(e){var t=document.createElement("div");return t.setAttribute("class",e),t},t.delegate=function(e,t,n){var i=function(e,t){return e&&e.classList&&e.classList.contains(t)};r[e+"-"+t]||(r[e+"-"+t]={className:t,cb:n},document.addEventListener(e,function(e){var r=e.target,o=!0;if(!i(r,t))for(;r&&o;)r=r.parentNode,i(r,t)&&(o=!1);i(r,t)&&n(r,e)}))},t.circleProgress=function(e){var t=void 0,n=document.getElementById(e),r=n.getContext("2d");r.lineWidth="4",r.strokeStyle="#fff";var i=n.width/2,o=n.height/2,a=6e3/360,s=360;return{start:function(){return new Promise(function(e){r.clearRect(0,0,n.width,n.height),function(){var c=0;t=setInterval(function(){c+=1,r.clearRect(0,0,n.width,n.height),r.beginPath(),r.arc(i,o,40,Math.PI/180*270,Math.PI/180*(270+c)),r.stroke(),c>=s&&(clearInterval(t),e())},a)}()})},stop:function(){clearInterval(t)}}},t.ajax=function(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,i=e.body,o=void 0===i?null:i;return new Promise(function(e,n){var i=new XMLHttpRequest;i.open(r,t),i.onload=function(){i.status>=200&&i.status<300&&e(i.response),n(i.statusText)},i.onerror=function(){return n(i.statusText)},i.send(o)})}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(6),a=n(23),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t,this.request=new i(this.abHost),this.requestWrapper=new a(this.abHost),n&&(this.horizonWrapper=new o(n))}return r(e,[{key:"selectedAlternatives",value:function(e,t,n,r){this.request.do("GET","/v2/selected-alternatives",t.getParams({experiments:e}),null,n,r,t.getHeaders(),t.getTimeout())}},{key:"recordMetric",value:function(e,t,n){var r="/v2/tests/"+t.testId+"/"+e,i={experiment:t.experiment,alternative:t.alternative};this.requestWrapper.oneWay(r,i,n.getHeaders(),n.getTimeout()),this.recordHorizon(e,t)}},{key:"recordHorizonMulti",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&this.recordHorizon(e,t[n])}},{key:"recordHorizon",value:function(e,t){this.horizonWrapper&&this.horizonWrapper.send("ab",{metricId:e,experiment:t.experiment,alternative:t.alternative,trackId:t.testId})}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.horizonClient=t}return r(e,[{key:"send",value:function(e,t){var n=null;"ab"===e?(n=this.getABSignal(t),this.horizonClient.send(n)):"mab"===e&&(n=this.getMABSignal(t),this.horizonClient.send(n))}},{key:"getABSignal",value:function(e){return{id:"ab-"+e.metricId,contentType:"ab",version:"1.0",properties:{experiment:e.experiment,alternative:e.alternative,trackId:e.trackId}}}},{key:"getMABSignal",value:function(e){return{id:"mab-"+e.metricId,contentType:"mab",version:"1.0",properties:{algorithm:e.algorithm,experiment:e.experiment,arm:e.arm,trackId:e.testId}}}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=function(){function e(t,n){var r=t.experiment,i=t.alternative,o=t.testId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experiment=r,this.alternative=i,this.testId=o,this.context=n}return r(e,[{key:"impression",value:function(e){e=i.validated(e),this.context.googleAnalytics.impression(e,this.experiment),this._sendMetric("impression",e)}},{key:"conversion",value:function(e){e=i.validated(e),this.context.googleAnalytics.conversion(e,this.experiment),this._sendMetric("conversion",e)}},{key:"_sendMetric",value:function(e,t){var n={experiment:this.experiment,alternative:this.alternative,testId:this.testId};this.context.abEndpoint.recordMetric(e,n,t)}}],[{key:"parseRequest",value:function(t,n){var r=JSON.parse(t),i={};for(var o in r.experiments)if(r.experiments.hasOwnProperty(o)){var a=new e(r.experiments[o],n);i[o]=a}return i}}]),e}();e.exports=o},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(25),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.created=!1}return i(e,[{key:"googleAnalytics",value:function(e,t,n,r){"function"==typeof ga?(this.created||(ga("create","UA-6912161-21","auto","globoab"),this.created=!0),ga("globoab.send","event","debug-ab-"+o.version,e,this.toMessage(t,n,r))):console.error("Globo-ab - It was not possible to identify the ga function...")}},{key:"choose",value:function(e,t,n,r){this._send(e,t,"choose",n,r)}},{key:"impression",value:function(e,t){this._send(e,t,"impression","call")}},{key:"conversion",value:function(e,t){this._send(e,t,"conversion","call")}},{key:"_send",value:function(e,t,n,r,i){void 0!==e&&e.isEnabledGADebugger()&&this.googleAnalytics(t,n,r,i)}},{key:"toMessage",value:function(e,t,n){"object"===(void 0===n?"undefined":r(n))&&(n=JSON.stringify(n).substring(0,1e3));var i=e+"."+t;return void 0!==n&&(i=i+"."+n),i}}]),e}();e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLUGIN_KEYNAME="playerPluginVideosRecommendation",t.PLUGIN_AB_NAME="video-recommendation-ab-plugin",t.RECOMMENDATION_GROUPS=Object.freeze({DEFAULT:Object.freeze({endpoint:null,storageKey:null}),BBB:Object.freeze({path:/^\/realities\/bbb\//,endpoint:"https://recomendacao.globo.com/rec/v2/item/gshow/videos-mc-bbb",storageKey:"bbb"}),NOVELAS:Object.freeze({path:/^\/novelas\//,endpoint:"https://recomendacao.globo.com/rec/v2/item/gshow/VIDEOS-MC-NOVELAS",storageKey:"novelas"})}),t.SEEN_VIDEOS_STORAGE_KEY="seen"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n(11)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(12);var i=n(17),o=u(n(19)),a=u(n(20)),s=n(9),c=u(n(32)),l=u(n(34));function u(e){return e&&e.__esModule?e:{default:e}}var f=Clappr.UICorePlugin,d=window.glb&&window.glb.getCurrentEnv&&window.glb.getCurrentEnv()||"local";"qa"===d&&i.Settings.useQAConfiguration();var p=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.SITE_ID||"gshow",h=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.MOBILE_GROUP||"desktop",v=new i.HorizonClient(p,h),m="gshow-mc-video-recommendation-rollout",b={experiment:{name:m,alternatives:{"rec-after-plugin":c.default,control:o.default}}},y=new a.default(d,v),g=y.createOptions().enableGADebugger().skipImpression(),_=y.choose(m,g),w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.pluginInstances={};var r=n.core._options.videosRecommendation||{};return n.recommendationHandler=new l.default({url:r.target}),n.recommendationHandler.isAvailable&&n.init(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f),r(t,[{key:"init",value:function(e){var t=this;!function(e,t,n){for(var r in b.experiment.alternatives){var i=b.experiment.alternatives[r];t[r]=new i(e,n),t[r].disable(),e.addPlugin(t[r])}}(e,this.pluginInstances,this.recommendationHandler),_.then(function(e){var n=function(e,t){var n=e.alternative,r=t[n];return r&&(r.enable(),r.init(e)),n}(e,t.pluginInstances);t.recommendationHandler.onError(function(){t.pluginInstances[n].enabled&&(t.core.options.exitFullscreenOnEnd=!0,t.pluginInstances[n].disable(),console.warn("[player-plugin-videos-recommendation] Desabilitando plugin"))})}).catch(function(e){console.error("[player-plugin-videos-recommendation] Falha ao escolher uma alternativa para o teste AB: "+m),console.error(e)})}},{key:"name",get:function(){return s.PLUGIN_AB_NAME}}]),t}();t.default=w,e.exports=t.default},function(e,t,n){var r=n(13);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0};n(15)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(14)(!1)).push([e.i,'.clappr-player.video-rec-cancel-screen--enabled .poster__background{-webkit-filter:blur(10px);filter:blur(10px);-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}.video-rec-cancel-screen{width:100%;height:100%;position:absolute;display:none!important;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.video-rec-cancel-screen--active{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-cancel-screen__title{font-size:14px!important;font-family:opensans-regular!important}@media screen and (min-width:620px){.video-rec-cancel-screen__title{font-size:20px!important;margin-top:5px!important}}.video-rec-cancel-screen__replay{display:-webkit-box;display:-ms-flexbox;display:flex;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;z-index:1002;color:#fff;background-color:transparent;border:0;margin:18px auto 0;padding:8px;outline:0;cursor:pointer}@media screen and (min-width:620px){.video-rec-cancel-screen__replay{margin-top:35px;font:normal 16px/18px opensans-regular!important}}.video-rec-cancel-screen__replay svg{margin-right:6px}.video-rec-cancel-screen__video-list{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px!important}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list{max-width:80%;margin-top:25px!important}}.video-rec-cancel-screen__video-list section{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0 15px!important;display:none!important;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;cursor:pointer}.video-rec-cancel-screen__video-list section:first-child{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section{display:block!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.video-rec-cancel-screen__video-list section:first-child{display:block!important}}.video-rec-cancel-screen__video-list section .thumb-container{max-width:35%;height:auto;position:relative;background-color:#333}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container{max-width:100%}.video-rec-cancel-screen__video-list section .thumb-container__picture{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}.video-rec-cancel-screen__video-list section .thumb-container picture img{width:100%}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container picture img{max-width:100%;height:auto}}.video-rec-cancel-screen__video-list section .thumb-container__duration{right:0;position:absolute;bottom:0;background-color:#000;font-size:12px!important;font-family:opensans-regular!important;padding:2px 5px!important}.video-rec-cancel-screen__video-list section .thumb-container__play{top:30%;left:37%;max-width:25%;position:absolute}.video-rec-cancel-screen__video-list section .info-container{width:100%;text-align:left;font:normal 14px/18px opensans-bold!important;margin-left:10px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container{display:block;margin-left:0!important}}.video-rec-cancel-screen__video-list section .info-container__chapeu{display:block;font-family:opensans-regular!important;font-weight:600;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__chapeu{margin-top:10px!important;font-size:14px!important}}.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:3;margin-top:4px!important;font-size:16px!important;line-height:20px!important}}.clappr-player.video-rec-after-end--enabled .poster__play-wrapper{visibility:hidden!important}.video-rec-after-end{display:none!important;width:100%;height:100%;position:absolute;z-index:1000;background-color:#333}.video-rec-after-end #canvas{width:100%;height:auto}.video-rec-after-end.video-rec-after-end--show{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end__content{max-width:72%;z-index:1002}.video-rec-after-end__screen{width:100%;height:100%;position:absolute;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.video-rec-after-end__screen--next-video{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end__screen--next-video:after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;z-index:1001;background-color:#000;opacity:.6}.video-rec-after-end__screen__chapeu{display:block;font:normal 14px/19px opensans-regular!important;letter-spacing:-.3px;text-align:center}@media screen and (min-width:620px){.video-rec-after-end__screen__chapeu{font:normal 18px/18px opensans-regular!important}}.video-rec-after-end__screen__title{display:block;font:normal 4.5vw/5.5vw opensans-bold!important;letter-spacing:-.3px;text-align:center;margin-top:2px!important;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-after-end__screen__title{font-size:20px!important;line-height:24px!important;margin-top:8px!important;display:block}}.video-rec-after-end__screen__canvas{position:relative;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-top:10px!important;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);height:12vw}@media screen and (min-width:620px){.video-rec-after-end__screen__canvas{margin-top:30px!important;-webkit-transform:none;-ms-transform:none;transform:none;height:auto;height:70px}}.video-rec-after-end__screen__canvas__play{max-width:40px;position:absolute}.video-rec-after-end__screen__btn-cancel{display:block;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;z-index:1002;color:#fff;background-color:transparent;border:0;margin:10px auto 0;cursor:pointer;position:relative;z-index:2}@media screen and (min-width:620px){.video-rec-after-end__screen__btn-cancel{font:normal 16px/18px opensans-regular!important;margin:28px auto 0}}.video-rec-after-end__screen__btn-cancel:active{outline:0}.clappr-player.video-rec-before-end--enabled .poster__play-wrapper{visibility:hidden!important}.video-rec-before-end{height:57px;right:12px;left:12px;bottom:12px;z-index:998;position:absolute;display:none!important;border-radius:8px;overflow:hidden;background-color:hsla(0,0%,56.9%,.7);-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.2);box-shadow:0 4px 8px 0 rgba(0,0,0,.2)}@media screen and (min-width:620px){.video-rec-before-end{width:305px;height:64px;right:16px;left:auto;bottom:16px;cursor:pointer}}.video-rec-before-end--active{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-before-end--player-hud{bottom:76px;z-index:996}@media screen and (min-width:620px){.video-rec-before-end--player-hud{z-index:998}}.video-rec-before-end__progress-bar{width:100%;height:100%;position:absolute;background-color:rgba(0,0,0,.6);z-index:-1;-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;-webkit-transform-origin:76px;-ms-transform-origin:76px;transform-origin:76px}@media screen and (min-width:620px){.video-rec-before-end__progress-bar{-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;-webkit-transform-origin:85px;-ms-transform-origin:85px;transform-origin:85px}}.video-rec-before-end__container{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;width:calc(100% - 40px)}.video-rec-before-end__container__content{width:calc(100% - 76px);display:-webkit-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:left;padding-left:8px!important;font-family:OpenSans!important;font-size:14px!important;font-weight:400!important;font-style:normal!important;font-stretch:normal!important;line-height:normal!important;letter-spacing:normal;color:#eee}.video-rec-before-end__container__content h4{font-weight:700!important;line-height:1.43!important}.video-rec-before-end__container__content h4,.video-rec-before-end__container__content span{white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow-x:hidden}@media screen and (min-width:620px){.video-rec-before-end__container__content{width:calc(100% - 85px)}}.video-rec-before-end__container__img{display:-webkit-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;background-color:#333}.video-rec-before-end__container__img img{width:76px;height:100%;-o-object-fit:cover;object-fit:cover}@media screen and (min-width:620px){.video-rec-before-end__container__img img{width:85px}}.video-rec-before-end__close{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;width:40px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.video-rec-before-end__close svg{width:14px;height:14px}.video-rec-before-end__close svg path:first-child{fill:#eee}',""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,s=0,c=[],l=n(16);function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(m(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(m(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),d(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=s++;n=a||(a=h(t)),r=y.bind(null,n,c,!1),i=y.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=l(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return u(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&u(f(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){"use strict";(function(e){var n,r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,s){"object"==o(t)&&"object"==o(e)?e.exports=s():(r=[],void 0===(i="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=i))}("undefined"!=typeof self&&self,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var o={EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_TRACK_HOST:"https://horizon-track.globo.com",HORIZON_SCHEMAS_HOST:"https://horizon-schemas.globo.com",HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_REQUEST_ENCODING:"base64",HORIZON_CLIENT_UUID:i(n(2)).default.getResource("clientInstanceUUID",(0,r.default)()),SCHEMA_VALIDATOR_SCRIPT_URL:"https://s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,PACKAGE_VERSION:"1.0.3"},a={useQAConfiguration:function(){o.HORIZON_TRACK_HOST="https://horizon-track.qa.globoi.com",o.HORIZON_SCHEMAS_HOST="https://horizon-schemas.qa.globoi.com",o.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(o,a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resouce.",COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded."},i={mustBeDefined:function(e){throw new Error(r.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(r,i)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return window.horizonResources=window.horizonResources||{},window.horizonResources};t.default={getContext:r,getResource:function(e,t){var n=r();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=t.HorizonClient=void 0,n(4);var r=o(n(6)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}t.HorizonClient=r.default,t.Settings=i.default},function(e,t,n){n(5).polyfill()},function(e,t,n){function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],l=Object.getOwnPropertyDescriptor(i,c);void 0!==l&&l.enumerable&&(n[c]=i[c])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(0)),o=l(n(10)),a=l(n(1)),s=l(n(12)),c=l(n(22));function l(e){return e&&e.__esModule?e:{default:e}}var u={READY:"stateReady",UNLOADED:"stateNotReady",LOADING:"stateLoading"},f=function(){function e(t,n){var r=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=t||a.default.mustBeDefined("tenant"),this.deviceGroup=n||a.default.mustBeDefined("deviceGroup"),this.defaultContentType=l,this.validator=o.default,this.clientVersion=i.default.PACKAGE_VERSION,this.state=u.UNLOADED,this.referer=document.referrer;var f=null,d=null;this.setSchemasProvider=function(e){return f=e},this.getSchemasProvider=function(){if(!f){var e=c.default.getInstance();r.setSchemasProvider(e)}return f},this.setEventBus=function(e){return d=e},this.getEventBus=function(){if(!d){var e=s.default.getInstance(r.tenant,r.deviceGroup);r.setEventBus(e)}return d},this.isReady=function(){return!!f&&r.validator.isReady()&&f.isReady()}}return r(e,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?(this.state=u.READY,e()):(this.state=u.LOADING,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=u.LOADING,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady(function(){return e.flush()})}},{key:"send",value:function(e){var t=this;if(this.validator.validateArgs(e),!this.isReady())return this.state===u.UNLOADED&&this.flush(),void this.onReady(function(){return t.send(e)});this.validateBeforeEnqueue(e);var n=this.getScopeInfo(),r=Object.assign({},e,n);r.contentType||(this.defaultContentType||a.default.mustBeDefined("contentType"),r.contentType=this.defaultContentType),this.getEventBus().enqueue(r)}}]),e}();t.default=f},function(e,t,n){var r=n(8),i=n(9);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},i=c(n(11)),a=c(n(1)),s=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var l={ready:[]},u=function(){return!!window.tv4},f=function(e){return null===e?null:isNaN(e)&&!isNaN(Date.parse(e))?null:a.default.INVALID_DATE};t.default={validateFor:function(e,t){if(!u())throw new Error(a.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(a.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(a.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(a.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(e){var t=Object.prototype.hasOwnProperty;if(!(e&&t.call(e,"id")&&t.call(e,"version")&&t.call(e,"properties")))throw new Error(a.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(e));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==r(e.properties))throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(e.id.length<2||e.version.length<3)throw new Error(a.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(e));var n=Object.assign({},e);if(delete n.id,delete n.version,delete n.properties,delete n.contentType,Object.keys(n).length>0)throw new Error(a.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:f,isReady:u,onReady:function(e){if(u())return e();if(l.ready.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Validator callback stack.");return l.ready.unshift(e)},load:function(){i.default.isDefined("tv4")||(0,i.default)([s.default.SCHEMA_VALIDATOR_SCRIPT_URL],"tv4",{async:!0,numRetries:s.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",f),l.ready.forEach(function(e){return e()})},error:function(e){throw new Error(a.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}},function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var e=function(){},t={},n={},r={};function i(e,t){if(e){var i=r[e];if(n[e]=t,i)for(;i.length;)i[0](e,t),i.splice(0,1)}}function o(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(t,n,r,i){var o,s,c=document,l=r.async,u=(r.numRetries||0)+1,f=r.before||e,d=t.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(t)?(o=!0,(s=c.createElement("link")).rel="stylesheet",s.href=d):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(s=c.createElement("img")).src=d:((s=c.createElement("script")).src=t,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(e){var c=e.type[0];if(o&&"hideFocus"in s)try{s.sheet.cssText.length||(c="e")}catch(e){c="e"}if("e"==c&&(i+=1)<u)return a(t,n,r,i);n(t,c,e.defaultPrevented)},!1!==f(t,s)&&c.head.appendChild(s)}function s(e,n,r){var s,c;if(n&&n.trim&&(s=n),c=(s?r:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}!function(e,t,n){var r,i,o=(e=e.push?e:[e]).length,s=o,c=[];for(r=function(e,n,r){if("e"==n&&c.push(e),"b"==n){if(!r)return;c.push(e)}--o||t(c)},i=0;i<s;i++)a(e[i],r,n)}(e,function(e){o(c,e),i(s,e)},c)}return s.ready=function(e,t){return function(e,t){var i,o,a,s=[],c=(e=e.push?e:[e]).length,l=c;for(i=function(e,n){n.length&&s.push(e),--l||t(s)};c--;)o=e[c],(a=n[o])?i(o,a):(r[o]=r[o]||[]).push(i)}(e,function(e){o(t,e)}),s},s.done=function(e){i(e,[])},s.reset=function(){t={},n={},r={}},s.isDefined=function(e){return e in t},s})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n(13)),o=d(n(2)),a=d(n(14)),s=d(n(0)),c=d(n(1)),l=d(n(18)),u=d(n(19)),f=d(n(20));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(){return o.default.getResource("bus",{})},h=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||c.default.mustBeDefined("tenant"),this.instanceID=n||c.default.mustBeDefined("instanceID"),this.deviceGroup=r||c.default.mustBeDefined("deviceGroup"),this.queue=new l.default(s.default.EVENTS_BUFFER_SIZE),(new u.default).every(s.default.EVENTS_SENDER_INTERVAL).call(function(){i.queue=i.filterQueue();var e=i.prepareRequest();i.dispatch(e,s.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach(function(e){return i.enqueue(e)})}).call(f.default).start()}return r(e,[{key:"setMaxQueueSize",value:function(e){this.queue=l.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-s.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter(function(t){return t.actionTs>e})}},{key:"prepareRequest",value:function(){return{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,actions:this.queue.splice(0,s.default.EVENTS_BULK_SIZE)}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(c.default.INVALID_REQUEST);return e.actions.length>0}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=s.default.HORIZON_TRACK_HOST+"/event/"+this.currentTenant,r=a.default.get(t);if(!this.isValidRequest(e))return!1;var o=r(e);return(0,i.default)(n,o)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(c.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,s.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),e}();t.default={getInstance:function(e,t){var n=p(),r=e+"-"+t;return n[r]||(n[r]=new h(e,s.default.HORIZON_CLIENT_UUID,t)),n[r]},reset:function(e,t){e&&0!==e.length||c.default.mustBeDefined("tenant"),t&&0!==t.length||c.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete p()[n]},getContextBus:p}},function(e,t,n){!function(n){var r=function(e,t){var n="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("POST",e,!1),n.withCredentials=!0,n.setRequestHeader("Accept","*/*"),"string"==typeof t?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text/plain"):"[object Blob]"==={}.toString.call(t)&&t.type&&n.setRequestHeader("Content-Type",t.type);try{n.send(t)}catch(e){}return!0};"navigator"in n&&"sendBeacon"in n.navigator&&(r=navigator.sendBeacon.bind(navigator)),void 0!==e&&e.exports&&(t=e.exports=r),t.sendBeacon=r}("object"==("undefined"==typeof window?"undefined":o(window))?window:this)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(15)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var a={base64:function(e){var t=new FormData;return t.append("data",r.default.encode(JSON.stringify(e))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in a))throw new Error(i.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return a[e]}}},function(e,t,n){(function(e,r){var i;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(a){void 0===t||o(t);var s=("object"==(void 0===e?"undefined":o(e))&&e&&e.exports,"object"==(void 0===r?"undefined":o(r))&&r);s.global!==s&&s.window;var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new c(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",s=-1,c=e.length-o;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),a+=u.charAt((i=t+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=u.charAt((i=t+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(s),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(f,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=u.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(i=function(){return d}.call(t,n,t,e))||(e.exports=i)}()}).call(t,n(16)(e),n(17))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=t}return r(e,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(t,n){var r=new e(n);return t.forEach(function(e){return r.push(e)}),r}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}return r(e,[{key:"tick",value:function(){var e=this;this.callbacks.forEach(function(t){return t(e)})}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),e}();t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(21)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=i.default.EVENTS_SENDER_MIN_INTERVAL,n=i.default.EVENTS_SENDER_MAX_INTERVAL,o=Number(r.default.get("_hzt.interval"))||i.default.EVENTS_SENDER_INTERVAL;o<=n&&o>=t&&e.interval!==o&&e.reschedule(o)}},function(e,t,n){var r,i;
/*!
     * JavaScript Cookie v2.2.0
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */!function(o){void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in o)o[l]&&(c+="; "+l,!0!==o[l]&&(c+="="+o[l]));return document.cookie=t+"="+i+c}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var p=u[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=p[0].replace(f,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(f,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===v){a=h;break}t||(a[v]=h)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(2)),o=c(n(1)),a=c(n(0)),s=c(n(23));function c(e){return e&&e.__esModule?e:{default:e}}var l={READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},u=function(){return i.default.getResource("schemas",{data:{}})},f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=l.STATE_NOT_READY,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return r(e,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);var r=u().data[n];if(!r)throw new Error(o.default.UNSUPPORTED_TYPE+": "+n);return r}},{key:"isReady",value:function(){return this.state===l.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=l.STATE_SCHEDULED,this.callbacks.onRetry.forEach(function(e){return e()}),setTimeout(function(){e.state=l.STATE_NOT_READY,e.load()},a.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===l.STATE_READY)return e(u().data);if(this.callbacks.onReady.length>a.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===l.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"execAsync",value:function(e,t){setTimeout(function(){return e(t)},1)}},{key:"load",value:function(){var e=this,t=u();this.state===l.STATE_NOT_READY&&(this.state=l.STATE_LOADING,this.callbacks.onLoad.forEach(function(e){return e()}),s.default.request("GET",this.url,function(n){t.data=Object.assign(t.data||{},n),e.state=l.STATE_READY,e.callbacks.onReady.forEach(function(n){return e.execAsync(n,t.data)})},function(t){e.state=l.STATE_ERROR,e.callbacks.onError.forEach(function(n){return e.execAsync(n,t)}),e.retry()}))}}]),e}();t.default={getInstance:function(e){var t=u();return t.provider||(t.provider=new f(e||a.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:u}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,r){var i=new XMLHttpRequest;i.open(e,t,!0),i.onload=function(){return i.status<400?n(JSON.parse(i.response)):r(i.response)},i.onerror=r,i.send()}}}])})}).call(this,n(18)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2));var o=Clappr,a=o.Events,s=o.UICorePlugin,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.finish=!1,n.analytics=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),r(t,[{key:"init",value:function(e){this.ab=e}},{key:"bindEvents",value:function(){this.playback&&this.listenTo(this.playback,a.PLAYBACK_ENDED,this.impression.bind(this))}},{key:"conversion",value:function(){this.analytics.sendClickAutoplay(),this.ab.conversion()}},{key:"impression",value:function(){this.analytics.sendImpressionAutoplay(),this.ab.impression(),this.listenToOnce(this.playback,a.PLAYBACK_PROGRESS,this.conversion)}},{key:"name",get:function(){return"video-recommendation-control-plugin"}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}}]),t}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=n(21),a=n(26),s=n(29),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.env=this._getEnv(t),this.server=this._getServer(this.env),this.horizonClient=n,this.abMain=new o(this.server,this.horizonClient)}return r(e,[{key:"createOptions",value:function(){return new i}},{key:"mab",value:function(){return new a(this.server,this.horizonClient)}},{key:"location",value:function(){return new s(this.server,this.horizonClient)}},{key:"impression",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;this.abMain.impression({experiment:n,alternative:r,testId:i},t)}},{key:"conversion",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;this.abMain.conversion({experiment:n,alternative:r,testId:i},t)}},{key:"choose",value:function(e,t){return this.abMain.choose(e,t)}},{key:"_getEnv",value:function(e){return"prod"===e?e:"qa"}},{key:"_getServer",value:function(e){return"prod"===this.env?"https://globo-ab.globo.com":"https://globo-ab.qa.globoi.com"}}]),e}();e.exports=c},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=n(5),a=n(7),s=n(8),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.horizonClient=n,this.abEndpoint=new o(this.server,this.horizonClient),this.googleAnalytics=new s}return r(e,[{key:"impression",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;new a({experiment:n,alternative:r,testId:i},this).impression(t)}},{key:"conversion",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;new a({experiment:n,alternative:r,testId:i},this).conversion(t)}},{key:"choose",value:function(e,t){var n=i.validated(t);if(this.googleAnalytics.choose(n,e,"call"),"string"==typeof e)return this._chooseOne(e,n);if(Array.isArray(e))return this._chooseMulti(e,n);throw new TypeError("Para sorteio o experimento precisa ser uma string ou uma lista")}},{key:"_chooseOne",value:function(e,t){var n=this;return new Promise(function(r,i){n.abEndpoint.selectedAlternatives(e,t,function(i){var o=a.parseRequest(i.responseText,n)[e];t.isSkippedImpression()||n.abEndpoint.recordHorizon("impression",o),n.googleAnalytics.choose(t,e,"success"),r(o)},function(r){n.googleAnalytics.choose(t,e,"fail",r),i(r)})})}},{key:"_chooseMulti",value:function(e,t){var n=this,r=e.join(",");return new Promise(function(e,i){n.abEndpoint.selectedAlternatives(r,t,function(i){var o=a.parseRequest(i.responseText,n);t.isSkippedImpression()||n.abEndpoint.recordHorizonMulti("impression",o),n.googleAnalytics.choose(t,r,"success"),e(o)},function(e){n.googleAnalytics.choose(t,r,"fail",e),i(e)})})}}]),e}();e.exports=c},function(e,t,n){"use strict";(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getPluginParams",value:function(){var t={},n=["ab-client-context","ab-client-experiment","ab-client-alternative"],r=e.getDocumentLocationSearch().substr(1).split("&");for(var i in r)if(r.hasOwnProperty(i)){var o=r[i].split("=");n.indexOf(o[0])>-1&&(t[o[0]]=o[1])}return t}},{key:"getDocumentLocationSearch",value:function(){return document.location.search}},{key:"isCompatibleWithPlugin",value:function(){return void 0!==t.window}},{key:"interceptParams",value:function(t,n){try{if(e.isCompatibleWithPlugin()&&t){var r=void 0,i=void 0;if(t.indexOf("/location/")>-1){var o=t.split("/");r=o[o.length-1]}else t.indexOf("selected-alternatives")>-1&&(i=n.experiments||n.experiment);if(i||r)return Object.assign({},n,this.getExperimentSettings(r,i))}}catch(e){console.error(e)}return n}},{key:"getExperimentSettings",value:function(e,t){var n=this.getPluginParams();if(e&&n["ab-client-context"]===e&&n["ab-client-experiment"]){var r={experiment:n["ab-client-experiment"],alternative:n["ab-client-alternative"]};return r.alternative||delete r.alternative,r}return t&&n["ab-client-experiment"]===t&&n["ab-client-alternative"]?{alternative:n["ab-client-alternative"]}:{}}}]),e}();e.exports=r}).call(this,n(3))},function(e,t,n){"use strict";(function(t){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(24),o=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.host=t,this.sendBeaconOneWay=new i(this.host),this.xmlHttp=new o(this.host)}return r(e,[{key:"oneWay",value:function(e,t,n,r){this.isBrowserSupportSendBeacon()&&!this.hasHeaders(n)?this.sendBeaconOneWay.send(e,t):this.xmlHttp.oneWaySend(e,t,n,r)}},{key:"isBrowserSupportSendBeacon",value:function(){return!(void 0===t.navigator||!t.navigator.sendBeacon)}},{key:"hasHeaders",value:function(e){return void 0!==e&&e.length>0}}]),e}();e.exports=a}).call(this,n(3))},function(e,t,n){"use strict";(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t}return n(e,[{key:"send",value:function(e,n){t.navigator.sendBeacon(this.abHost+e,JSON.stringify(n))}}]),e}();e.exports=r}).call(this,n(3))},function(e){e.exports={_args:[["globo-ab-client@3.0.10","/Users/helio/projects/player-plugin-videos-recommendation"]],_from:"globo-ab-client@3.0.10",_id:"globo-ab-client@3.0.10",_inBundle:!1,_integrity:"sha1-oT4WQlYqNiV3/U6I6JrhMsaavGM=",_location:"/globo-ab-client",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"globo-ab-client@3.0.10",name:"globo-ab-client",escapedName:"globo-ab-client",rawSpec:"3.0.10",saveSpec:null,fetchSpec:"3.0.10"},_requiredBy:["/"],_resolved:"https://artifactory.globoi.com/artifactory/api/npm/npm-repos/globo-ab-client/-/globo-ab-client-3.0.10.tgz",_spec:"3.0.10",_where:"/Users/helio/projects/player-plugin-videos-recommendation",author:{name:"Bigdata Analytics Team"},dependencies:{},description:"Client for creating experiment at Globo AB platform",devDependencies:{babel:"^6.23.0","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.1",enzyme:"^3.4.4","enzyme-adapter-react-16":"^1.2.0",eslint:"^4.15.0","eslint-config-google":"^0.9.1","globocom-horizon":"^1.0","http-server":"^0.11.1",istanbul:"^0.4.5",jasmine:"^2.9.0","jasmine-enzyme":"^6.0.3",jsdom:"^12.0.0",jshint:"^2.9.6",proxyquire:"^1.8.0",sinon:"^4.2.0",webpack:"^2.2.1"},directories:{src:"src"},keywords:["globo-ab"],license:"ISC",main:"src/globo-ab.js",name:"globo-ab-client",publishConfig:{registry:"https://artifactory.globoi.com/artifactory/api/npm/npm-local"},repository:{type:"git",url:"gitlab@gitlab.globoi.com:personalizacao/globo-ab-client.git"},scripts:{build:"eslint --fix ./src/* && jasmine && webpack",coverage:"istanbul cover -x **/spec/** node_modules/jasmine/bin/jasmine.js",start:"http-server",tag:"git tag -a 3.0.10 -m '3.0.10'",test:"jasmine"},version:"3.0.10"}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=n(27),a=n(28),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.horizonClient=n,this.mabEndpoint=new o(this.server,this.horizonClient)}return r(e,[{key:"increment",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative;new a({experiment:t,arm:n,testId:r,abAlternative:i},this).increment()}},{key:"reward",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative;new a({experiment:t,arm:n,testId:r,abAlternative:i},this).reward()}},{key:"choose",value:function(e,t){var n=this,r=i.validated(t);return new Promise(function(t,i){n.mabEndpoint.getSelectedArm(e,r,function(i){var o=a.parseRequest(i.responseText,e,n);r.isSkippedImpression()||n.mabEndpoint.recordHorizon("increment",o),t(o)},function(e){i(e)})})}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(6),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t,this.horizonClient=n,this.request=new i(this.abHost),n&&(this.horizonWrapper=new o(this.horizonClient))}return r(e,[{key:"getSelectedArm",value:function(e,t,n,r){var i="",o="GET";t.isSkippedImpression()?i="/mab/"+e+"/choose":(i="/mab/"+e+"/chooseAndIncrement",o="POST"),this.request.do(o,i,null,null,n,r)}},{key:"recordMABMetric",value:function(e,t){var n="/mab/"+t.experiment+"/"+e,r={arm:t.arm,testId:t.testId,abAlternative:t.abAlternative};this.request.do("POST",n,{},r),this.recordHorizon(e,t)}},{key:"recordHorizon",value:function(e,t){this.horizonWrapper&&this.horizonWrapper.send("mab",{metricId:e,algorithm:"ucb1",experiment:t.experiment,arm:t.arm,testId:t.testId})}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){var r=t.experiment,i=t.arm,o=t.testId,a=t.abAlternative;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experiment=r,this.arm=i,this.testId=o,this.abAlternative=a,this.context=n}return r(e,[{key:"increment",value:function(){this._sendMetric("increment")}},{key:"reward",value:function(){this._sendMetric("reward")}},{key:"_sendMetric",value:function(e){var t={experiment:this.experiment,arm:this.arm,testId:this.testId,abAlternative:this.abAlternative};this.context.mabEndpoint.recordMABMetric(e,t)}}],[{key:"parseRequest",value:function(t,n,r){var i=JSON.parse(t);return i.experiment=n,new e(i,r)}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(30),o=n(31),a=n(0),s=n(8),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.horizonClient=n,this.abEndpoint=new o(this.server,this.horizonClient),this.googleAnalytics=new s}return r(e,[{key:"choose",value:function(e,t){var n=this,r=a.validated(t);return new Promise(function(t,o){n.abEndpoint.selectedDrawedExperiment(e,r,function(e){var r=i.parseRequest(e.responseText,n);t(r)},function(e){o(e)})})}}]),e}();e.exports=c},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(7),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parseRequest",value:function(e,t){var n=JSON.parse(e),r=Object.keys(n)[0],o=n[r],a=o.alternative,s=o.testId;return new i({experiment:r,alternative:a,testId:s},t)}}]),e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(5),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.abHost=e,n.request=new i(n.abHost),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),r(t,[{key:"selectedDrawedExperiment",value:function(e,t,n,r){this.request.do("GET","/ab/location/"+e,t.getLocationParams(),null,n,r)}}]),t}();e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(n(33));var s=Clappr,c=s.Events,l=s.UICorePlugin,u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.core.options.exitFullscreenOnEnd=!1,r.core=e,r.recommendationHandler=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),r(t,[{key:"name",get:function(){return"video-recommendation-after-plugin"}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"nextVideo",get:function(){return this.videos[0].content}}]),r(t,[{key:"init",value:function(e){var t=this;this.ab=e,this.analytics=i,this.uniqueId=this.core.uniqueId,this.playerElement=this.core.el,this.pluginElement=(0,o.createElement)("video-rec-after-end"),this.pluginElement.innerHTML=this.template(),this.playerElement.appendChild(this.pluginElement),this.pluginElementTitle=this.pluginElement.getElementsByClassName("video-rec-after-end__screen__title")[0],this.pluginElementBackground=this.pluginElement.getElementsByClassName("video-rec-after-end__screen--next-video")[0],this.cancelScreen=new a.default(this.playerElement,this.uniqueId),this.cancelScreen.onReplay(this.replayVideo.bind(this)),this.cancelScreen.onClick(this.playVideo.bind(this)),this.circleProgress=(0,o.circleProgress)("canvas-"+this.uniqueId);(0,o.delegate)("click","canvas-"+this.uniqueId,function(){t.analytics.sendClickAutoplay(),t.circleProgress.stop(),t.playVideo()}.bind(this)),(0,o.delegate)("click","btn-cancel-"+this.uniqueId,function(){t.toggleScreen(!1),t.analytics.sendClickCancelAutoplay(),t.circleProgress.stop(),t.recommendationHandler.updateSeenVideos(t.nextVideo.video.id),t.updatePlugin().then(function(){return t.cancelScreen.open()}).catch(function(){return t.cancelScreen.close()})}.bind(this))}},{key:"playVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nextVideo.video.id;this.toggleScreen(!1),this.ab.conversion(),this.core.load(e),this.playback.play(),this.updatePlugin().catch(function(){})}},{key:"replayVideo",value:function(){this.ab.conversion(),this.playback.play()}},{key:"onEnded",value:function(){var e=this;this.toggleScreen(!0),this.ab.impression(),this.analytics.sendImpressionAutoplay(),this.circleProgress.start().then(function(){e.analytics.sendStartAutoplay(),e.circleProgress.stop(),e.playVideo()})}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core.mediaControl,c.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.playback&&(this.listenTo(this.playback,c.PLAYBACK_ENDED,this.onEnded),this.listenToOnce(this.playback,c.PLAYBACK_PLAY,function(){e.recommendationHandler.updateSeenVideos(e.playback.video.id),e.updatePlugin().catch(function(){})}))}},{key:"updatePlugin",value:function(){var e=this;return this.playerElement.classList.add("video-rec-after-end--enabled"),this.toggleScreen(!1),this.recommendationHandler.getVideos().then(function(t){e.videos=t,e.cancelScreen.updateVideos(t),e.updateElement()}).catch(function(){return e.playerElement.classList.remove("video-rec-after-end--enabled"),e.toggleScreen(!1),Promise.reject()})}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateElement",value:function(){this.pluginElementBackground.style="background-image: url('"+this.nextVideo.image.sizes.M.url+"')",this.pluginElementTitle.textContent=this.nextVideo.title}},{key:"template",value:function(){return'\n      <div data-track-category="'+this.analytics.CATEGORY+'" class="video-rec-after-end__screen video-rec-after-end__screen--next-video" style="background-image: url(\'\')">\n        <div class="video-rec-after-end__content">\n          <span class="video-rec-after-end__screen__chapeu">Assista ao próximo</span>\n          <span class="video-rec-after-end__screen__title"></span>\n          <div\n            data-track-action="next-video"\n            data-track-label="click"\n            class="video-rec-after-end__screen__canvas canvas-'+this.uniqueId+'"\n          >\n            <canvas id="canvas-'+this.uniqueId+'"></canvas>\n            <svg class="video-rec-after-end__screen__canvas__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path></g></svg>\n          </div>\n          <button\n            data-track-action="cancel-video"\n            data-track-label="click"\n            type="button"\n            class="video-rec-after-end__screen__btn-cancel btn-cancel-'+this.uniqueId+'"\n          >\n            Cancelar\n          </button>\n        </div>\n      </div>\n    '}},{key:"toggleScreen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.pluginElement.classList.toggle("video-rec-after-end--show",e)}}]),t}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=n(4);var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.analytics=i,this.uniqueId=n,this.playerElement=t,this.element=(0,o.createElement)("video-rec-cancel-screen"),this.element.innerHTML=this.template(),this.playerElement.appendChild(this.element),this.listElement=this.element.getElementsByClassName("video-rec-cancel-screen__video-list")[0],this.replayCallback=function(){},this.clickCallback=function(e){return e},(0,o.delegate)("click","replay-"+this.uniqueId,this.handleReplay.bind(this)),(0,o.delegate)("click","video-"+this.uniqueId,this.handleClick.bind(this))}return r(e,[{key:"open",value:function(){this.playerElement.classList.add("video-rec-cancel-screen--enabled"),this.element.classList.add("video-rec-cancel-screen--active"),this.analytics.send([{action:"exibicao recomendacao",opt_label:"exibicao dos 3 videos"}])}},{key:"close",value:function(){this.playerElement.classList.remove("video-rec-cancel-screen--enabled"),this.element.classList.remove("video-rec-cancel-screen--active")}},{key:"updateVideos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.listElement.innerHTML=e.map(this.renderVideo.bind(this)).join("")}},{key:"onReplay",value:function(e){this.replayCallback=e}},{key:"onClick",value:function(e){this.clickCallback=e}},{key:"handleReplay",value:function(){this.close(),this.replayCallback(),this.analytics.send({action:"play reveja",opt_label:"rever"})}},{key:"handleClick",value:function(e){var t=parseInt(e.getAttribute("data-index"),10)+1,n=parseInt(e.getAttribute("data-video-id"));this.clickCallback(n),this.analytics.send({action:"recomendacao",opt_label:"clique | video "+t}),this.close()}},{key:"renderVideo",value:function(e,t){return'\n      <section data-index="'+t+'" class="video-'+this.uniqueId+'" data-video-id="'+e.content.video.id+'">\n        <div class="thumb-container">\n          <picture class="thumb-container__picture">\n            <source media="(min-width: 620px)" srcset="'+e.content.image.sizes.S.url+'">\n            <img src="'+e.content.image.sizes.S.url+'" />\n          </picture>\n          <span class="thumb-container__duration">'+(0,o.parseMilliseconds)(e.content.video.duration)+'</span>\n          <svg class="thumb-container__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path><path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g>\n          </svg>\n        </div>\n        <div class="info-container">\n          <span class="info-container__chapeu">'+e.content.section+'</span>\n          <span class="info-container__title">'+e.content.title+"<span>\n        </div>\n      </section>\n    "}},{key:"template",value:function(){return'\n      <span class="video-rec-cancel-screen__title">Assista também</span>\n      <div class="video-rec-cancel-screen__video-list">\n\n      </div>\n      <button class="video-rec-cancel-screen__replay replay-'+this.uniqueId+'" type="button">\n        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15" height="18"><defs><path id="a" d="M0 .592h14.955v16.726H0"/></defs><g fill="none" fill-rule="evenodd" transform="matrix(-1 0 0 1 15 0)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="#FFF" d="M13.109 5.636a.826.826 0 0 0-1.12-.073.72.72 0 0 0-.075 1.056c1.224 1.326 1.707 3.073 1.324 4.793-.668 2.995-3.796 4.92-6.973 4.29-3.177-.63-5.218-3.578-4.551-6.574.555-2.491 2.813-4.236 5.385-4.393L5.497 6.266a.718.718 0 0 0 .007 1.058.814.814 0 0 0 .557.215c.205 0 .41-.074.565-.223l2.872-2.744a.725.725 0 0 0 .228-.53.724.724 0 0 0-.236-.527L6.58.807a.827.827 0 0 0-1.122.007.718.718 0 0 0 .008 1.058L6.94 3.245C3.699 3.466.862 5.675.16 8.82c-.848 3.803 1.744 7.547 5.778 8.347 4.034.799 8.004-1.645 8.852-5.448.488-2.183-.126-4.4-1.682-6.083" mask="url(#b)"/></g></svg>\n        Reveja\n      </button>\n    '}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),o=n(4);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e.getConfig(t.url),r=n.endpoint,i=n.storageKey,o=n.isAvailable;this.endpoint=r,this.storageKey=i,this.isAvailable=o,this.onErrorCallback=function(){}}return r(e,[{key:"_requestData",value:function(){var e=this;return(0,o.ajax)({url:this.endpoint}).catch(function(){return Promise.reject({error:"[player-plugin-videos-recommendation] Falha ao requisitar vídeos recomendados"})}).then(function(t){e._setSessionStorage(t);var n=e._getSessionStorage();return!n||n.error?Promise.reject({error:"[player-plugin-videos-recommendation] Falha ao recuperar os dados armazenados"}):Promise.resolve(n)})}},{key:"_getSessionStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.storageKey;if(window.sessionStorage){var t=window.sessionStorage.getItem(i.PLUGIN_KEYNAME+"--"+e);if(!t)return null;try{return JSON.parse(t)}catch(e){return{error:e}}}}},{key:"_setSessionStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.storageKey;if(window.sessionStorage){var n="string"==typeof e?e:JSON.stringify(e);return window.sessionStorage.setItem(i.PLUGIN_KEYNAME+"--"+t,n),e}}},{key:"_filterSeenVideos",value:function(e){var t=this.getSeenVideos();return t.length<=0?e:e.filter(function(e){return t.indexOf(e.content.video.id)<0})}},{key:"_handleDataSource",value:function(){var e=this._getSessionStorage();return!e||e.error?this._requestData():Promise.resolve(e)}},{key:"onError",value:function(e){"function"==typeof e&&(this.onErrorCallback=e)}},{key:"getSeenVideos",value:function(){return this._getSessionStorage(i.SEEN_VIDEOS_STORAGE_KEY)||[]}},{key:"getVideos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return this._handleDataSource().then(function(t){return e._filterSeenVideos(t)}).then(function(e){return e.length>=t?Promise.resolve(e.slice(0,t)):Promise.reject({warn:"[player-plugin-videos-recommendation] Todos os vídeos foram vistos"})}).catch(function(t){return t.error&&console.error(t.error),t.warn&&console.warn(t.warn),t instanceof Error&&console.error(t),Promise.reject(e.onErrorCallback())})}},{key:"updateSeenVideos",value:function(e){var t=[].concat(this.getSeenVideos(),e);return this._setSessionStorage(t,i.SEEN_VIDEOS_STORAGE_KEY)}}],[{key:"getConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=window.location.href.split("/",3).join("/");e=new URL(e,t);var n=function(e){return Object.assign({isAvailable:!(!e.endpoint||!e.storageKey)},e)};for(var r in i.RECOMMENDATION_GROUPS)if((r=i.RECOMMENDATION_GROUPS[r]).path&&r.path.test(e.pathname))return n(r);return n(i.RECOMMENDATION_GROUPS.DEFAULT)}}]),e}();t.default=a,e.exports=t.default}]);