/* aep-formats-22.5.2 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./handlebars/base"),e=a("./handlebars/safe-string").default,f=a("./handlebars/exception").default,g=a("./handlebars/utils"),h=a("./handlebars/runtime"),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i,c.default=j},{"./handlebars/base":2,"./handlebars/exception":3,"./handlebars/runtime":4,"./handlebars/safe-string":5,"./handlebars/utils":6}],2:[function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return k(b)&&(b=b.call(this)),!0===b?e(this):!1===b||null==b?d(this):j(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(k(a)&&(a=a.call(this)),b.data&&(c=o(b.data)),a&&"object"==typeof a)if(j(a))for(var h=a.length;f<h;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return k(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){if(k(a)&&(a=a.call(this)),!g.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function f(a,b){n.log(a,b)}var g=a("./utils"),h=a("./exception").default;c.VERSION="1.3.0",c.COMPILER_REVISION=4;var i={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};c.REVISION_CHANGES=i;var j=g.isArray,k=g.isFunction,l=g.toString,m="[object Object]";c.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:n,log:f,registerHelper:function(a,b,c){if(l.call(a)===m){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){l.call(a)===m?g.extend(this.partials,a):this.partials[a]=b}};var n={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(n.level<=a){var c=n.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};c.logger=n,c.log=f;var o=function(a){var b={};return g.extend(b,a),b};c.createFrame=o},{"./exception":3,"./utils":6}],3:[function(a,b,c){"use strict";function d(a,b){var c;b&&b.firstLine&&(c=b.firstLine,a+=" - "+c+":"+b.firstColumn);for(var d=Error.prototype.constructor.call(this,a),f=0;f<e.length;f++)this[e[f]]=d[e[f]];c&&(this.lineNumber=c,this.column=b.firstColumn)}var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c.default=d},{}],4:[function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=l;if(b!==c){if(b<c){var d=m[c],e=m[b];throw new k("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new k("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new k("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new k("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:j.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},j.extend(c,b),j.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new k("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)}function i(){return""}var j=a("./utils"),k=a("./exception").default,l=a("./base").COMPILER_REVISION,m=a("./base").REVISION_CHANGES;c.checkRevision=d,c.template=e,c.programWithDepth=f,c.program=g,c.invokePartial=h,c.noop=i},{"./base":2,"./exception":3,"./utils":6}],5:[function(a,b,c){"use strict";function d(a){this.string=a}d.prototype.toString=function(){return""+this.string},c.default=d},{}],6:[function(a,b,c){"use strict";function d(a){return i[a]||"&amp;"}function e(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function f(a){return a instanceof h?a.toString():a||0===a?(a=""+a,k.test(a)?a.replace(j,d):a):""}function g(a){return!a&&0!==a||!(!n(a)||0!==a.length)}var h=a("./safe-string").default,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;c.extend=e;var l=Object.prototype.toString;c.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;c.isFunction=m;var n=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===l.call(a)};c.isArray=n,c.escapeExpression=f,c.isEmpty=g},{"./safe-string":5}],7:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||void 0===a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(e){return p.reject(a,e)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(d){c.status="error",c.value=d}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=c=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){g(c,this.state===r?a:b,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},c.resolve=k,c.reject=l,c.all=m,c.race=n},{immediate:7}],9:[function(a,b,c){!function(a,c){void 0!==b&&b.exports?b.exports=c():"function"==typeof define&&define.amd?define(c):this[a]=c()}("ObjectTemplating",function(){var a={forEach:function(b,c){if(a.isNumeric(b.length))for(var d=0;d<b.length&&!1!==c(b[d],d);d++);else for(var e in b)if(b.hasOwnProperty(e)&&!1===c(b[e],e))break},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"function"==typeof a},isObjectLike:function(a){return!!a&&"object"==typeof a},convertToValue:function(b){var c;if(a.isNumeric(b))c=Number(b);else if("["==b.substring(0,1)&&"]"==b.substring(b.length-1)){var d=b.substring(1,b.length-1).split(/, ?/);c=[];for(var e=0;e<d.length;e++)c.push(a.convertToValue(d[e]))}else c="true"==b||"false"==b?"true"==b:b;return c}},b={},c=function(a){return">"==a.substring(0,1)?[">",a.substring(1)]:a.replace(/\[\]/g,".[]").split(".")},d=function(b,c){c=c.slice();var e=c.shift(),f=null;if(">"==e)f=a.convertToValue(c[0]);else if("[]"==e)f=[],0===c.length?a.forEach(b,function(a){f.push(a)}):a.forEach(b,function(a){f.push(d(a,c))});else{var g=b[e];g&&(f=0===c.length?g:d(g,c))}return f},e=function(b,c,d,f){d=d.slice();var g=d.shift(),h="[]"==d[0]&&!!d.shift();if(b[g]||(b[g]=h?[]:{}),0===d.length){var i=h?c.slice():c;f&&(i=f(i)),b[g]=i}else h?a.isArray(c)?a.forEach(c,function(a,c){b[g][c]||(b[g][c]={}),e(b[g][c],a,d,f)}):a.forEach(b[g],function(a,h){e(b[g][h],c,d,f)}):e(b[g],c,d,f)};return{create:function(f,g,h){var i={};return a.forEach(g,function(g,j){var k=null;a.isObjectLike(g)&&(k=a.isFunction(b[g.helper])?b[g.helper]:null,g=g.path);var l=d(f,c(g));l?e(i,l,c(j),k):"function"==typeof h&&h(g,j)}),i},registerHelper:function(a,c){b[a]=c}}})},{}],10:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./request"),f=a("./supported-media-type"),g=a("./lo"),h=function(a,b,c,h){var i=function(){d.extend(b.parameters,{umt:f.getUMT()}),a.viewableImp&&d.extend(b.parameters,{ctx:c,vt:g.isNumber(a.userMetrics.getViewabilityTime())?d.msToSec(a.userMetrics.getViewabilityTime()):null,vr:a.userMetrics.getViewabilityRate()}),(a.waCfg||a.onPageLeave)&&(b.parameters.di=1),b.parameters.q&&b.parameters.q.hasOwnProperty("max")&&(b.parameters.q=Math.min(b.parameters.q.max,Math.floor((a.admTopWindow.height()-b.parameters.q.offset)/b.parameters.q.height)))},j=function(c){a.logger.info("Service get targets",b.targets),h.getTargets().then(function(d){var e=[],f=void 0;g.forEach(d,function(b){b&&"string"==typeof b?b.match(/oath=1\|(\d{1,2})/)?f=parseInt(b.match(/oath=1\|(\d{1,2})/)[1]):e.push(b):b&&b.msg&&a.logger.warn(b.msg)}),a.logger.info("Service targets resolved:",e.join(";")),b.parameters.trg=encodeURIComponent(e.join(";")),f&&(b.parameters.q=b.parameters.q-f),c()},function(b){a.logger.error(b)})},k=function(c,d){var f,g=a.tagWindow==top?a.placement.formatWindow:a.tagWindow;a.logger.info("Service perform request",b.parameters),f=e.get(b,g,a.group),f.subscribe.cb(function(b){b.e?a.logger.error("Service error:",b.e):c(b)}),f.subscribe.ccb(d)};this.require=function(c,d){a.logger.info("Service prepare request",b),i(),b.targets?j(function(){k(c,d)}):k(c,d)}};b.exports={create:function(a,b,c,d){return new h(a,b,c,d)}}},{"./lo":38,"./request":55,"./supported-media-type":62,"./utils":71}],11:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./lo"),f=function(a){var b,c,f=this,g=null,h=[],i=0,j=0,k=function(){var a=b.split(":");return a[1]/a[0]};this.getHeight=function(){return c.offsetWidth*k()},this.setReferenceElement=function(a,b){c=a,b&&(i=b.top,j=b.bottom)},this.setRatio=function(a){b=a},this.isEnabled=function(){return b&&!b.match(/^\d+:[1-9]\d*$/)&&a.logger.warn("Invalid aspect ratio",b),b&&b.match(/^\d+:[1-9]\d*$/)},this.addElement=function(a){h.push(a)},this.scaleReferenceElement=function(){d(c).css({height:f.getHeight()+i+j+"px"})},this.scaleInnerElements=function(){e.forEach(h,function(a){d(a).css({height:f.getHeight()+"px"})})},this.start=function(){g||(f.scaleReferenceElement(),f.scaleInnerElements(),g=setInterval(function(){f.scaleReferenceElement(),f.scaleInnerElements()},120))},this.stop=function(){clearInterval(g),g=null}};b.exports=f},{"./dom":23,"./lo":38}],12:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./params"),f=a("./dom");b.exports=function(a){a.config.avoidHrefRestoring||(a.element.href=a.value),f(a.element).on("mousedown",function(b){b=b||window.event,a.config.oob&&(2==b.button||d.isFirefox()&&1==b.button)?d.isJsToHtmlBase64DataUriSupported()?a.element.href=d.jsToHtmlBase64DataUri("var img = new Image(); img.onerror = img.onload = function() { \twindow.location.href = '"+a.value+"'; };img.src = 'http://ia.nspmotion.com/redirect/?r=' + Math.random() + '&url=' + \tencodeURIComponent('"+d.noCache(a.config.oob)+"') ;"):a.element.removeAttribute("href"):a.config.avoidHrefRestoring||(a.element.href=a.value),a.config.onClickProduct.dispatch()}),a.element.onclick=function(){var b=a.config.placement.formatWindow.admTopWindow,c=new e(a.scope,{slot:null,tagIndex:null,src:null}),f=a.formatModel.getProduct(c.slot,c.tagIndex);if(a.value){var g=b.open(d.addProtocolIfNeeded(a.value,d.getProtocol()));if(g)try{g.focus()}catch(i){}var h=function(){g?a.config.redirect&&(setTimeout(function(){b.location.href=a.config.redirect},1e3),g.focus()):b.location.href=a.value};f&&f.clickTracking&&d.report(f.clickTracking),d.isAccessible(a.config.tagWindow.parent)&&a.config.tagWindow.parent.HTMLCreative&&a.config.tagWindow.parent.HTMLCreative.reportEvent({Type:"Click"}),a.config.oob?d.report("http://ia.nspmotion.com/redirect/?r=[rnd]&url="+encodeURIComponent(d.noCache(a.config.oob)),h):h()}return!1}}},{"./dom":23,"./params":47,"./utils":71}],13:[function(a,b,c){"use strict";var d=a("./utils.js"),e=function(a){var b=function(a){return"%"+a.charCodeAt(0).toString(16)},c=function(a){return encodeURIComponent(a).replace(/[-_z.]/g,b).replace(/%/g,"z")},e=function(a){return decodeURIComponent(a.replace(/z/g,"%"))};this.setCookie=function(b,d,e){try{var f=b.toUTCString?b.toUTCString().replace(",",""):b+"",g=a+"="+c(f);if(d){g+=";expires="+(d.toUTCString?d.toUTCString():d+"")+";path=/",e&&(g+=";domain="+e)}document.cookie=g}catch(h){}},this.getCookie=function(){try{for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var f=b[c].split("=");if(d.trim(f[0])==a)return e(f[1])}}catch(g){}return""},this.updateCookie=function(b,c){var d=this.getCookie(a+"Date");this.setCookie(b,d,c)},this.deleteCookie=function(b){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; domain="+b:"")+"; path=/"}};b.exports=e},{"./utils.js":71}],14:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./geometry"),f=a("lie"),g=a("./messenger"),h=a("./dom"),i={0:"waiting",1:"init",2:"ready",3:"inViewport",4:"outViewport",5:"remove",6:"removed"},j={Waiting:0,Init:1,Ready:2,InViewport:3,OutViewport:4,Remove:5,Removed:6};b.exports=function(a,b,c,k){var l,m,n=d.createWatcher(function(){return e.intersectsViewport(b,50)}),o=function(b,c){var d={message:b,type:"Event",args:c||null};a.logger.info("sendMessage",'"'+i[b]+'"',d),l.send(b,d)},p=function(b){var c=i[b.message];a.logger.info("receiveMessage",'"'+c+'"'),q[c](b.args)},q={waiting:function(a){o(j.Init,k.params)},ready:function(a){n.status&&o(j.InViewport),n.leading.subscribe(function(){o(j.InViewport)}),n.trailing.subscribe(function(){o(j.OutViewport)}),m(b)},remove:function(b){n.unwatch(),a.placement.remove(!!a.waCfg)}};this.ready=new f(function(a,b){m=a}),this.init=function(){a.logger.info('Init Creative Controller. Wait for the message "waiting"'),b.contentWindow||a.logger.warn(b.tagName+" does not support Creative controller. Use an iframe instead"),h(b).css({visibility:"visible"}),l=new g(a.placement.formatWindow,b.contentWindow,k.file),l.receive(p),a.placement.onBeforeRemove.subscribe(function(){o(j.Removed)}),n.watch()}}},{"./dom":23,"./geometry":33,"./messenger":42,"./utils":71,lie:8}],15:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./format-model"),f=a("lie"),g=a("./lo"),h=a("./external"),i=a("../node_modules/object-templating"),j={0:"SUCCESS_OK",1:"SUCCESS_NO_AD",2:"ERROR_INVALID_REQUEST",3:"ERROR_UNKNOWN",undefined:"UNDEFINED_STATUS"},k=function(a,b){var c=[],d=function(){g.forEach(b,function(a,b){c.push({regExp:new RegExp(b,"i"),fileName:a})}),c.sort(function(a,b){return b.regExp.source.length-a.regExp.source.length})};this.get=function(b){var d=b?g.find(c,function(a){return b.match(a.regExp)}):null;return d?a+d.fileName:null},d()},l={"ads[].title":"products[].title","ads[].description":"products[].description","ads[].presets":"products[].price","ads[].url":"products[].click_url","ads[].imageOrThumbnail":"products[].image.url","ads[].image":"products[].image.url","ads[].thumbnail":"products[].image.url","ads[].pcd":"products[].price","ads[].isCriteo":">true","ads[].advDescription":"advertiser.description","ads[].advDomain":"advertiser.domain","ads[].advLogo":{path:"advertiser.domain",helper:"getLogoByAdvDomain"},advLogoClickUrl:"advertiser.logo_click_url",advDescription:"advertiser.description",advDomain:"advertiser.domain",advName:"advertiser.domain",privClickUrl:"privacy.optout_click_url"},m=function(a,b,c,m,n){e.apply(this,arguments);var o=this,p=n.getConfig(a.trg),q=n.getData(a.trg),r=!!a.di,s=function(a){return a.image=d.secureImage(a.image,b.imageProxy),a.thumbnail=d.secureImage(a.thumbnail,b.imageProxy),a.advLogo=d.secureImage(a.advLogo,b.imageProxy),a},t=new f(function(a,c){void 0===q.response_status||0===q.response_status?(b.logger.info("Wait for external logos"),h.get(d.supportHttps(p.logosFileUrl),{jsonp:{cbName:"_logos"}}).then(function(b){var d=new k(p.logosBaseUrl,b.data);i.registerHelper("getLogoByAdvDomain",d.get);var e=i.create(q,l);e&&e.ads&&0!=e.ads.length?(e.ads=g.map(e.ads,s),a(e)):c("No Criteo ads")})):c(j[q.response_status])});this.ready=new f(function(a,b){t.then(function(b){d.extend(o,b),a()},function(a){b(a)})}),this.reportBuyerImpressions=function(){d.report(g.map(q.impression_pixels,function(a){return a.url}))},this.buyerId=a.byr,this.isDeferredImpression=r,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.ads=null,this.vImpEventUrl=o.buildEventUrl("vimp"),this.vTimeEventUrl=o.buildEventUrl("vtime",{v:"[time]"})};b.exports=m},{"../node_modules/object-templating":9,"./external":27,"./format-model":29,"./lo":38,"./utils":71,lie:8}],16:[function(a,b,c){"use strict";var d=a("./utils.js"),e=a("./lo"),f={getId:function(a){var b=[],c=d.getViewportSize(a.document);return e.forEach(f.idList,function(a,d){a=a.sort(function(a,b){return b.value-a.value});for(var e=0;e<a.length;e++)if(c[d]>=a[e].value){b.push(a[e].id);break}}),b.join("-")},idList:{width:[{value:0,id:"hs"},{value:1051,id:"hm"},{value:1401,id:"hl"}],height:[{value:0,id:"vs"},{value:601,id:"vm"},{value:851,id:"vl"}]}};b.exports={getId:f.getId}},{"./lo":38,"./utils.js":71}],17:[function(a,b,c){"use strict";b.exports={desktop:1,tablet:2,smartphone:3}},{}],18:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./dom-utils"),f=a("lie"),g=a("./dom"),h={Expandable:a("./expandable"),Slider:a("./slider"),Fader:a("./fader"),Sidetabs:a("./sidetabs"),SidetabsMetro:a("./sidetabs-metro"),Creative:a("./creative"),Pushdown:a("./pushdown")},i={aspectRatio:function(a){a.config.placement.aspectRatio.addElement(a.element)},lines:function(a){var b=d.getInternetExplorerVersion(),c=a.element,f=a.config.placement.rootElement;if(b>0&&b<9)e.limitLines(c);else{var g=c.style.display;c.style.display="none";var h=e.fontSpy(c);a._state.fontLoad.push(h),h.then(function(){c.style.display=g,"hidden"==a.config.placement.status?a.config.placement.onShow.subscribe(function(){e.limitLines(c)}):e.limitLines(c)}).catch(function(b){a.config.logger.warn("Failed to load font "+b.failedFont),c.style.display=g,"none"==f.style.display?a.config.placement.onShow.subscribe(function(){e.limitLines(c)}):e.limitLines(c)})}},controller:function(a){var b=new h[a.value](a.config,a.element,a.scope,a.formatModel);b.ready&&a._state.ready.push(b.ready),b.init()},src:function(b){b._state.ready.push(a("./image.directive").call(i,b))},href:function(b){a("./click.directive").call(i,b)}},j={getDirectives:function(a){for(var b={},c=a.attributes,e=0;c&&e<c.length;e++){var f=c[e];if(f.name.match(/adm\-.*/)){var g=d.toDirectiveName(f.name);b[g]=b[g]||[],b[g].push({element:a,value:f.value})}}return b},run:function(a){var b={};g(a.element).children().each(function(c){var e=j.run(d.extend({element:c},a,{overwrite:!1}));c.getAttribute("adm-controller")||d.extend(b,e,{array:"concat"})});var c=j.getDirectives(a.element);d.extend(b,c,{array:"concat"});for(var e in c)if(c.hasOwnProperty(e)&&i[e])for(var f=0;f<c[e].length;f++){var h=c[e][f];i[e](d.extend({element:h.element,value:h.value,scope:b},a,{overwrite:!1}))}return b},start:function(a){return a._state={fontLoad:[],ready:[]},j.run(a),f.race(a._state.fontLoad).then(function(){},function(b){d.reloadFontCss(a.config)}).catch(function(b){a.config.logger.warn("Fonts could not be reloaded")}),a._state.ready.length>0&&a.config.logger.info("Wait for directive to be ready",a._state.ready),f.all(a._state.ready)}};b.exports=j},{"./click.directive":12,"./creative":14,"./dom":23,"./dom-utils":22,"./expandable":26,"./fader":28,"./image.directive":36,"./pushdown":51,"./sidetabs":57,"./sidetabs-metro":56,"./slider":59,"./utils":71,lie:8}],19:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./format-model"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=d.parseIfJson(a.prm)||{},j=b.displayCfg||{},k=h.getClkData(a.clk),l=function(a){var c=h.buildClickUrl(a);return c&&b.clickAudit&&(c=d.noCache(b.clickAudit)+encodeURIComponent(c)),c},m=function(a,b,c){var d=e.assign({},b,{title:a.tit,eventURL:h.buildEventUrl(null,{c:k.c}),clickTag:l(k)});return e.assign(d,c||{})};h.creativeIds.push(k.c),this.file=j.file||a.file,this.params=m(a,i,j.params),this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.vImpEventUrl=h.buildEventUrl("vimp"),this.vTimeEventUrl=h.buildEventUrl("vtime",{v:"[time]"})};b.exports=g},{"./format-model":29,"./lo":38,"./utils":71}],20:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./signal"),f=a("./dom-utils"),g=a("./geometry"),h=a("./lo"),i=function a(b,c){var i=this,j=b&&b.ownerDocument||c&&c.ownerDocument||c||document;c=c||j;var k={appear:function(b){return i.each(function(c){a.Data.set(c,"appear",d.poll(function(){return g.isInViewport(c)}).subscribe(b))})},visible:function(b){return i.each(function(c){a.Data.set(c,"visible",d.poll(function(){return f.isVisible(c)},b))})},hidden:function(b){return i.each(function(c){a.Data.set(c,"hidden",d.poll(function(){return!f.isVisible(c)},b))})},show:function(b){return i.each(function(c){var d=new e(!1);d.subscribe(b),a.Data.set(c,"show",d)})}};this.trigger=function(b){return i.each(function(c){var d=a.Data.get(c,b);d||(d=new e(!1),a.Data.set(c,b,d)),d.dispatch()})},this.bind=function(b,c){return i.each(function(d){var e=function(){return c.apply(d,arguments)};if(b in k){var f=a.Data.get(d,b);f?f.subscribe(e):k[b](e)}else d.attachEvent?d.attachEvent("on"+b,e):d.addEventListener?d.addEventListener(b,e,!0):d["on"+b]=e})},this.children=function(){var b=[];return h.forEach(n,function(a){if(a.children)b=b.concat(d.toArray(a.children));else{var c=d.toArray(a.childNodes);b=b.concat(h.filter(c,function(a){return 1==a.nodeType}))}}),new a(b,c)},this.addClass=function(a){return i.each(function(b){b.className.indexOf(a)<0&&(b.className+=" "+a)})},this.removeClass=function(a){return i.each(function(b){b.className=b.className.replace(a,"")})},this.css=function(a,b,c){return i.each(function(d){var e=function(a,b){b=h.isFunction(b)?b():b,d.style[a]=h.isNumber(b)&&0!=b&&"opacity"!=a?b+"px":b};if(h.isString(a)){if(!h.isNumber(b)&&!h.isString(b))return f.css(d,a,c);e(a,b)}else for(var g in a)a.hasOwnProperty(g)&&e(g,a[g])})},this.width=function(){return i.each(f.width)},this.outerWidth=function(){return i.each(function(a){return a.offsetWidth})},this.height=function(){return i.each(f.height)},this.position=function(){return i.each(f.position)},this.hiddenElementPosition=function(){return i.each(f.hiddenElementPosition)},this.on=function(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)i.bind(a[c],b);return i},this.click=function(a){return i.bind("click",a)},this.hover=function(a,b){return i.bind("mouseenter",a),i.bind("mouseleave",b||a),i},this.each=function(a){for(var b,c=0;c<n.length&&void 0===b;c++)b=a.call(i,n[c],c);return void 0===b?i:b},this.get=function(a){return n[a]},this.find=function(b){var d=[];return h.forEach(n,function(a){d=d.concat(m(b,a))}),new a(d,c)},this.hide=function(){i.css(f.filterOpacity({opacity:0}))},this.cloak=function(){i.each(f.cloak)},this.unCloak=function(){i.each(f.unCloak)};var l=function(a,b){var c,e=j.createElement("style"),f=[],g=[];for(j.documentElement.firstChild.appendChild(e),j._qsa=[],e.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",d.getWindow(j).scrollBy(0,0),e.parentNode.removeChild(e);j._qsa.length;)c=j._qsa.shift(),c.style.removeAttribute("x-qsa"),f.push(c);if(j._qsa=null,b.contains)for(var h=0;h<f.length;h++)b.contains(f[h])&&g.push(f[h]);else g=f;return g},m=function(a,b){var c=[];return h.isString(a)?c=b.querySelectorAll?b.querySelectorAll(a):l(a,b):a&&(a.nodeType||d.isWindow(a))?c=[a]:a&&a.length&&a[0].nodeType&&(c=a),d.toArray(c)},n=m(b,c);i.length=n.length};i.Data={uid:0,expando:"adm-element-uid",cache:{},get:function(a,b){var c=a[i.Data.expando];return i.Data.cache[c||i.Data.key(a)][b]},set:function(a,b,c){var d=a[i.Data.expando];i.Data.cache[d||i.Data.key(a)][b]=c},access:function(a,b,c){var d=i.Data.get(a,b);return d||i.Data.set(a,b,d=c),d},key:function(a){var b=a[i.Data.expando]=++i.Data.uid;return i.Data.cache[b]={},b}},b.exports=i},{"./dom-utils":22,"./geometry":33,"./lo":38,"./signal":58,"./utils":71}],21:[function(a,b,c){"use strict";var d=a("./dom-handler"),e=a("./dom-utils"),f=a("./dom"),g=a("./tweening"),h=a("./lo");d.prototype.fadeIn=function(a,b){return this.animate({opacity:1},a||400,"",b)},d.prototype.fadeOut=function(a,b){return this.animate({opacity:0},a||400,"",b)},d.prototype.animate=function(a,b,c,i){var j=arguments;return this.each(function(a){var b=f(a),c=d.Data.access(a,"tween",{}),i=function d(f,i,j,k){h.isFunction(j)&&!k&&(k=j,j="easeOutQuad"),j=j||"easeOutQuad";var l={};for(var m in f)f.hasOwnProperty(m)&&(l[m]=b.css(m,void 0,!0));b.css(l),c.player=new g.Player,c.player.onFrame=function(a){b.css(e.filterOpacity(a))},c.player.onStop=function(){h.isFunction(k)&&k.apply(a),c.animationQueue.shift(),c.animationQueue.length&&d.apply(b,c.animationQueue[0])},c.player.initialize(l,"linear"==j?g.Functions.getIdentity():g.Functions.getNormalizedExtern(j)),c.player.gotoKey(i,f)};c.animationQueue=c.animationQueue||[],c.animationQueue.push(j),1==c.animationQueue.length&&i.apply(b,j)})},d.prototype.stop=function(){return this.each(function(a){var b=d.Data.get(a,"tween");b&&b.player&&(b.animationQueue=[],b.player.stop())})},d.prototype.animateSprite=function(a,b,c){var d=this.width(),e=0,f=this;return function g(){f.css({backgroundPosition:(b-e)*d+"px 0"}),e++,e<b?setTimeout(g,1e3/a):c()}(),this},d.prototype.shake=function(a,b,c){return b=b||3,c=c||20,this.each(function(){var d=f(this);d.css("position","relative");for(var e=1;e<=b;e++)d.animate({left:-1*c},a/b/4).animate({left:c},a/b/2).animate({left:0},a/b/4)}),this}},{"./dom":23,"./dom-handler":20,"./dom-utils":22,"./lo":38,"./tweening":69}],22:[function(a,b,c){"use strict";var d=a("./utils"),e=a("lie"),f=a("./lo"),g={};g.limitLines=function(a,b,c){if(c=c||parseInt(a.getAttribute("adm-lines"),10),b=b||a,c){var e=b.childNodes;if(e&&e.length)for(var f=e.length-1;f>=0;f--){var h=e[f];g.limitLines(a,h,c)}else{var i=b.innerText?"innerText":b.textContent?"textContent":"nodeValue",j=b[i],k=g.css(a,"line-height",!0)*c,l=a.style.height,m=a.style.maxHeight;for(a.style.height="auto",a.style.maxHeight="none";j&&d.trim(j)&&g.height(a)>k;)j="..."!=j?j.replace(/([,;:\.\s]*\S+\s*)$/,"..."):"",b[i]=j;a.style.height=l,a.style.maxHeight=m}}},g.width=function(a){return d.isWindow(a)?d.getViewportSize(a.document).width:a.offsetWidth-g.css(a,"padding-left",!0)-g.css(a,"padding-right",!0)-g.css(a,"border-left-width",!0)-g.css(a,"border-right-width",!0)},g.height=function(a){return d.isWindow(a)?d.getViewportSize(a.document).height:a.offsetHeight-g.css(a,"padding-top",!0)-g.css(a,"padding-bottom",!0)-g.css(a,"border-top-width",!0)-g.css(a,"border-bottom-width",!0)},g.position=function(a){var b=a.ownerDocument.documentElement,c=d.getWindow(a.ownerDocument),e=a.getBoundingClientRect();return{left:e.left+c.pageXOffset-b.clientLeft,top:e.top+c.pageYOffset-b.clientTop}},g.fontSpy=function(a,b){var c={font:g.css(a,"font-family"),testFont:"Comic Sans MS, monospace",testString:"QW@HhsXJ",delay:50,timeOut:500},f=d.extend(c,b||{});return new e(function(b,c){if(f.font=f.font.split(",")[0],f.font){var d=a.ownerDocument,e=d.createElement("span");e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",e.style.visibility="hidden",e.style.fontFamily=f.testFont,e.style.fontSize="250px",e.innerHTML=f.testString,d.body.appendChild(e);var g=e.offsetWidth;e.style.fontFamily=f.font+","+f.testFont;(function a(){var h=e.offsetWidth;g===h?f.timeOut<0?(d.body.removeChild(e),c({failedFont:f.font})):(setTimeout(a,f.delay),f.timeOut=f.timeOut-f.delay):(d.body.removeChild(e),b("font loaded"))})()}else b("font loaded")})},g.filterOpacity=function(a){var b=d.getInternetExplorerVersion()
;return"opacity"in a&&b>0&&b<9&&(a.filter="Alpha(opacity="+100*a.opacity+")"),a},g.css=function(a,b,c){b=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var d="",e=a.ownerDocument,h=/-([a-z])/gi,i=b.replace(h,function(a,b){return(b+"").toUpperCase()});if(a.currentStyle){var j=/^-?\d+(?:px)?$/i,k=/^-?\d/,l=a.style;if(d=a.currentStyle[b]||a.currentStyle[i],!j.test(d)&&k.test(d)){var m=l.left,n=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,l.left="fontSize"===i?"1em":d||0,d=l.pixelLeft+"px",l.left=m,a.runtimeStyle.left=n}}else d=e.defaultView&&e.defaultView.getComputedStyle?e.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.style[i];if(c){var o=parseFloat(d);if(f.isNumber(o))return o;if("line-height"==b||"lineHeight"==b){var p=e.createElement(a.nodeName);p.style.fontSize=g.css(a,"font-size"),p.style.fontFamily=g.css(a,"font-family"),p.style.padding=0,p.style.margin=0,p.style.borderWidth=0,p.style.height="auto",p.style.clear="both",p.innerHTML="&nbsp;",a.parentNode.appendChild(p);var q=p.offsetHeight;return p.parentNode.removeChild(p),q}return 0}return d},g.isVisible=function(a,b,c,d,e,f,h){var i=a.parentNode,j=2;return!(!i||9!==i.nodeType)||"0"!==g.css(a,"opacity")&&"none"!==g.css(a,"display")&&"hidden"!==g.css(a,"visibility")&&(void 0!==b&&void 0!==c&&void 0!==d&&void 0!==e&&void 0!==f&&void 0!==h||(b=a.offsetTop,e=a.offsetLeft,d=b+a.offsetHeight,c=e+a.offsetWidth,f=a.offsetWidth,h=a.offsetHeight),!i||("hidden"!==g.css(i,"overflow")&&"scroll"!==g.css(i,"overflow")||!(e+j>i.offsetWidth+i.scrollLeft||e+f-j<i.scrollLeft||b+j>i.offsetHeight+i.scrollTop||b+h-j<i.scrollTop))&&(a.offsetParent===i&&(e+=i.offsetLeft,b+=i.offsetTop),g.isVisible(i,b,c,d,e,f,h)))},g.hiddenElementPosition=function(a){var b,c=a.ownerDocument,d=c.createElement("div");return d.style.position="absolute",d.style.opacity=0,d.style.height="1px",d.style.width="1px",a.parentNode.insertBefore(d,a),b=g.position(d),a.parentNode.removeChild(d),b},g.cloak=function(a){return"iframe"==a.nodeName.toLowerCase()&&d.isFirefox()?(a.style.position="absolute",a.style.visibility="hidden"):a.style.display="none",!0},g.unCloak=function(a){return"iframe"==a.nodeName.toLowerCase()&&d.isFirefox()?(a.style.removeProperty("position"),a.style.removeProperty("visibility")):a.style.removeProperty("display"),!0},b.exports=g},{"./lo":38,"./utils":71,lie:8}],23:[function(a,b,c){"use strict";var d=a("./dom-handler"),e=function(a,b){return a instanceof d?a:new d(a,b)};b.exports=e},{"./dom-handler":20}],24:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./format-model"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=a.dom,j=function(){h.tags=e.map(a.tags||[],t),l(function(a){k(h.creativeIds,a.creativeId),k(h.trackingImp,a.product.timp)})},k=function(a,b){b&&a.push(b)},l=function(a){var b=h.tags;b&&b.length>0&&e.forEach(b,function(b){e.forEach(b.ads,a)})},m=function(a){return d.formatPrice(a,b.priceFormat,b.currencySymbol)},n=function(a,c,f){var g=e.isArray(b.clickAudit)?b.clickAudit[c]:b.clickAudit,i=h.buildClickUrl(e.assign({x:c,r:d.generateKey(8)},a),f);return i&&g&&(i=d.noCache(g)+encodeURIComponent(i)),i},o=function(a,b){var c="",d=!1;return a=a.split(/,(?!(?:[^\(]*\))|(?:[^\{]*}))/),e.forEach(a,function(a){var f=[];return d=!1,a.replace(/(?:\{([^\{\}\(\)]*)})|(?:\(([^\{\}\(\)]*)\))/g,function(a,c,g){c&&(e.isString(b[c])||e.isNumber(b[c])?""!=b[c]&&f.push(b[c]):d=!0),g&&f.push(g)}),d||(c=f.join(" ")),d}),c},p=function(a){return i?i+"/logos/"+a+".png":""},q=function(a){return a?i+a:null},r=function(a){return d.isAbsPath(a)?a:i+a},s=function(a,c,e){var f=h.getClkData(a.clk),g=d.parseIfJson(a.cfg)||{},j={slot:c,tagIndex:e,cfg:g,product:a,title:d.parseIfJson(d.decodeHTMLEntities(a.tit)),iprice:m(a.ip),vpc:m(a.ip),ni:a.ni,cdc:a.ni,lprice:m(a.lp),cta:g.cta||"",redirect:b.redirect,thumbnail:d.secureImage(a.thumb||a.img,a.proxy&&b.imageProxy,i)||h.fallbackImage,image:d.secureImage(a.img||a.thumb,a.proxy&&b.imageProxy,i)||h.fallbackImage,description:d.parseIfJson(d.decodeHTMLEntities(a.desc)),pcd:m(a.p),pdl:m(a.lp),dis:a.dis,totalPrice:m(a.p),url:n(f,c,e),logo:p(a.lg),specialStrip:q(g.ss),creativeId:f.c,productId:f.pr,hp:!!a.hp};return j.clickQuery=d.parseQueryParams(j.url),j.presets=o((g.presets?g.presets+",":"")+"{cdc}(x){vpc},{pcd},{pdl}",j),j.price=o("{pcd}",j),j},t=function(a,b){return{title:d.decodeHTMLEntities(a.tit),logo:a.lg?p(a.lg):"",url:a.link?r(a.link):"",ads:e.map(a.ads||[],function(a,c){return s(a,c,b)})}};this.isDeferredImpression=!1,this.deferredImpressionHash=null,j()};b.exports=g},{"./format-model":29,"./lo":38,"./utils":71}],25:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./format-model"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=a.dom,j=function(){h.ads=e.map(a.ads||[],t),l(function(a){k(h.creativeIds,a.creativeId),k(h.trackingImp,a.product.timp)}),h.altDesign=m(h.ads),h.vImpEventUrl=h.buildEventUrl("vimp"),h.vTimeEventUrl=h.buildEventUrl("vtime",{v:"[time]"})},k=function(a,b){b&&a.push(b)},l=function(a){var b=h.ads;b&&b.length>0&&e.forEach(b,a)},m=function(a){var b=a[0].creativeId;return a.length===c.parameters.q&&e.every(a,function(a){return a.isRT&&a.creativeId==b})},n=function(a){return d.formatPrice(a,b.priceFormat,b.currencySymbol)},o=function(a){var b={b:"font-weight: bold",k:"font-style: italic",u:"text-decoration: underline",s:"text-decoration: line-through"},c=a.color?["color: "+a.color]:[];return a.format&&e.forEach(a.format.split(","),function(a){c.push(b[a])}),c=c.join("; ")},p=function(a,c){var f=e.isArray(b.clickAudit)?b.clickAudit[c]:b.clickAudit,g=h.buildClickUrl(e.assign({x:c,r:d.generateKey(8)},a));return g&&f&&(g=d.noCache(f)+encodeURIComponent(g)),g},q=function(a,b){var c="",d=!1;return a=a.split(/,(?!(?:[^\(]*\))|(?:[^\{]*}))/),e.forEach(a,function(a){var f=[];return d=!1,a.replace(/(?:\{([^\{\}\(\)]*)})|(?:\(([^\{\}\(\)]*)\))/g,function(a,c,g){c&&(e.isString(b[c])||e.isNumber(b[c])?""!=b[c]&&f.push(b[c]):d=!0),g&&f.push(g)}),d||(c=f.join(" ")),d}),c},r=function(a,b){return a?a+"/logos/"+b+".png":""},s=function(a,b){return b?a+b:null},t=function(a,c){var e=h.getClkData(a.clk),f=d.parseIfJson(a.cfg)||{},g={slot:c,cfg:f,product:a,title:d.parseIfJson(d.decodeHTMLEntities(a.tit)),iprice:n(a.ip),vpc:n(a.ip),ni:a.ni,cdc:a.ni,lprice:n(a.lp),cta:f.cta||"",redirect:b.redirect,style:o(f),thumbnail:d.secureImage(a.thumb||a.img,a.proxy&&b.imageProxy,i)||h.fallbackImage,image:d.secureImage(a.img||a.thumb,a.proxy&&b.imageProxy,i)||h.fallbackImage,description:d.parseIfJson(d.decodeHTMLEntities(a.desc)),pcd:n(a.p),pdl:n(a.lp),dis:a.dis,totalPrice:n(a.p),url:p(e,c),logo:r(i,a.lg),specialStrip:s(i,f.ss),creativeId:e.c,productId:e.pr,isRT:!!e.rm,hp:!!a.hp};return g.clickQuery=d.parseQueryParams(g.url),g.presets=q((f.presets?f.presets+",":"")+"{cdc}(x){vpc},{pcd},{pdl}",g),g.price=q("{pcd}",g),g};this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,j()};b.exports=g},{"./format-model":29,"./lo":38,"./utils":71}],26:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./dom"),f=a("./params");a("./dom-tweening");var g=function(a,b,c){var g=a.placement.formatWindow.document,h=new f(c,{collapse:null,expand:null,collapseHover:null,collapseSprite:null,collapsed:null,expanded:null,collapsedWidth:null,collapsedHeight:null,expandedWidth:null,expandedHeight:null}),i=h.collapsedWidth||h.collapsedHeight||h.expandedWidth||h.expandedHeight,j=function(){l(),a.tagWindow.parent.closeMastHead&&a.tagWindow.parent.closeMastHead(),a.tagWindow.parent.doCollapse&&a.tagWindow.parent.doCollapse(!0)},k=function(){m(),a.tagWindow.parent.openMastHead&&a.tagWindow.parent.openMastHead(),a.tagWindow.parent.doExpand&&a.tagWindow.parent.doExpand(!0)},l=function(){e(h.expanded,g).css({display:"none"}),e(h.collapsed,g).css({display:"block"}),i&&d.adjustIframeSize(a.placement.formatWindow,h.collapsedWidth||a.width,h.collapsedHeight||a.height)},m=function(){e(h.expanded,g).css({display:"block"}),e(h.collapsed,g).css({display:"none"}),i&&d.adjustIframeSize(a.placement.formatWindow,h.expandedWidth||a.width,h.expandedHeight||a.height)};this.init=function(){if(h.init?"expand"==h.init?k():"collapse"==h.init&&j():(e(h.expanded,g).css({display:"block"}),e(h.collapsed,g).css({display:"block"})),e(h.expand,g).click(k),h.collapseSprite){var b=e(h.collapseHover,g);e(h.collapseSprite,g).animateSprite(9,18,function(){e(h.collapseSprite,g).click(function(){b.css({display:"none"}),j()}).hover(function(){b.css({display:"block",opacity:0}).animate({right:25,opacity:1},300)},function(){b.animate({right:-10,opacity:0},100)})})}else e(h.collapse,g).click(j);var c=a.tagWindow.parent;if(c.HTMLCreative){var d=c.HTMLCreative.admCollapseCommand,f=c.HTMLCreative.admExpandCommand;c.HTMLCreative.admCollapseCommand=function(){l(),d.apply(this,arguments)},c.HTMLCreative.admExpandCommand=function(){m(),f.apply(this,arguments)}}}};b.exports=g},{"./dom":23,"./dom-tweening":21,"./params":47,"./utils":71}],27:[function(a,b,c){"use strict";var d=a("lie"),e=a("./utils.js"),f={},g={},h=function(a,b){if(a.jsonp){(a.jsonp.global?window:f)[a.jsonp.cbName]=function(a){b({data:a})}}},i=function(a,b){return b.jsonp.cbParam&&(b.data=b.data||{},b.data[b.jsonp.cbParam]=b.jsonp.cbName),b.data&&(a=a+"?"+e.buildQuery(b.data)),a},j=function(a){var b=document.createElement("script");b.src=a,document.getElementsByTagName("head")[0].appendChild(b)},k=function(a,b){void 0!==a.timeout&&setTimeout(function(){b({timeout:!0})},a.timeout)},l={get:function(a,b){return b=b||{},b.jsonp||(b.jsonp={cbName:e.generateKey(8)}),g[b.jsonp.cbName]||(g[b.jsonp.cbName]=new d(function(c,d){h(b,c),j(i(a,b)),k(b,d)})),g[b.jsonp.cbName]},set:function(a,b){f[a](b)}};b.exports="undefined"!=typeof _aep&&_aep.External?_aep.External:l},{"./utils.js":71,lie:8}],28:[function(a,b,c){"use strict";var d=a("./params"),e=a("./dom");a("./dom-tweening");var f=function(a,b,c){var f=e(b),g=f.children(),h=[],i=new d(c,{fadeTime:500,itemDelay:100});this.init=function(){f.on("visible",function(){var a=0;g.each(function(b){h.push(setTimeout(function(){e(b).fadeIn(i.fadeTime)},a)),a+=i.itemDelay}),g.hide()}),f.on("hidden",function(){for(var a=0;a<h.length;a++)clearTimeout(h[a]);h=[],g.hide()}),g.hide()}};b.exports=f},{"./dom":23,"./dom-tweening":21,"./params":47}],29:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./devices");b.exports=function(a,b,c,g){var h=this;this.config=b,this.fallbackImage=b.fallbackImage||(d.isSecure(b.template)?"https://s-akfs.nspmotion.com/aep/css/imgs/aep-img-404-70x70.gif":"http://akfs.nspmotion.com/aep/css/imgs/aep-img-404-70x70.gif"),this.contextId=g,this.t=c.parameters.t||a.t,this.designId=b.useDynamicDesign&&a.cd?a.cd:b.templateId||b.template.match(/([^\/]+)\.tpl\.min\.js/).pop(),this.hasDesign=!!this.designId,this.designUrl=e.template(b.tplUrl)({id:h.designId}),this.designCssUrl=e.template(b.cssUrl)({id:h.designId}),this.imp=a.imp||null,this.trg=a.trg||null,this.creativeIds=[],this.trackingImp=[],this.getProduct=function(a,b){return a=e.isArray(a)?a[0]:a,b=e.isArray(b)?b[0]:b,h.tags&&e.isNumber(b)?h.tags[b].ads[a]:h.ads[a]},this.getClkData=function(a){return d.parseQueryParams(d.replaceTokens(a,b,"%","%"))},this.tGroup=e.map(a.tags||[],function(a){return a.t}),this.impGroup=e.map(a.tags||[],function(a){return a.imp}),this.buildEventUrl=function(a,c,f){return b.reporting+"?"+d.buildQuery(e.assign({t:(e.isNumber(f)?h.tGroup[f]:h.t)||null,e:a||"[event]",c:h.creativeIds.length>0?h.creativeIds.join(","):null,byr:h.buyerId||null,imp:(e.isNumber(f)?h.impGroup[f]:h.imp)||null,ctx:g,r:"[rnd]"},c))},this.buildClickUrl=function(a,c){return b.click+"?"+d.buildQuery(e.assign({t:(e.isNumber(c)?h.tGroup[c]:h.t)||null,imp:(e.isNumber(c)?h.impGroup[c]:h.imp)||null,ptv:b.shareDevice?f[b.deviceName]:null,r:"[rnd]"},a))},this.setMetaData=function(a){h.creativeMetaData=a},this.getWidth=function(){return h.creativeMetaData?h.creativeMetaData.width:b.width},this.getHeight=function(){return h.creativeMetaData?h.creativeMetaData.height:b.height}}},{"./devices":17,"./lo":38,"./utils":71}],30:[function(a,b,c){"use strict";var d=a("./signal"),e=a("./ad-service"),f=a("./directive-runner"),g=a("./dom"),h=a("./placement"),i=a("./geometry"),j=a("lie"),k=a("./lo"),l=a("./logger"),m=a("./utils"),n=a("./external"),o=a("./rect"),p=a("./inline"),q=a("./page-leaving"),r=a("./report-manager"),s=a("./user-metrics"),t=a("./device-context"),u=a("./target-manager"),v=a("./model-factory"),w=a("./freq-cap"),x={"e-commerce":a("./native-view"),"e-commerce-group":a("./native-view"),criteo:a("./native-view"),oath:a("./native-view"),gemini:a("./native-view"),video:a("./native-view"),display:a("./native-view"),"third-party-display":a("./third-party-view"),"third-party-buyer":a("./third-party-view"),passback:a("./third-party-view")},y=function(){var a,b,c,y=function(c,d,e,f){a.removed||((a.wrapInIframe||"native"==f.type&&("display"==d||"video"==d))&&b.split(c),"BODY"==c.nodeName.toUpperCase()||"child"==e?b.insertInto(c):"nextSibling"==e?b.insertAfter(c):"previousSibling"==e&&b.insertBefore(c),b.updateSplitIfAny())},z=function(b,c){a.shrinkPlacement?(a.placement.setWidth("0","px"),a.placement.setHeight("0")):(b.creativeMetaData&&b.creativeMetaData.isResponsive?a.placement.setWidth("100","%"):a.placement.setWidth(b.getWidth(),"px"),a.placement.setHeight(b.getHeight(),c))},A=function(c,d){var e=c.mediaType;d.moveTo&&y(d.moveTo,e,d.relationship,d.view),"third-party"==d.view.type&&d.view.render(),d.inlineMargin&&(b.setMargin(d.inlineMargin),p.setInnerMargin(b.formatElement,d.inlineMargin)),z(c,d.slide),b.show(d.slide,a.aspectRatio)},B=function(c,d){"passback"!=c.contentType?(a.logger.info("Wait node from WA"),b.getWaNode().then(function(b){try{var e=p.getInsertionContext(b),f=p.getMargin(e.target,a);A(c,{moveTo:e.target,relationship:e.relationship,view:d,inlineMargin:f,slide:!0})}catch(g){a.logger.error(g)}},function(b){a.logger.warn(b)})):(b.topWindow.aepwa._formatReady.reject("Passback executed. No need for placement"),d.render())},C=function(c,d){a.logger.info("Wait target node from placement-selector"),m.wait(function(){return b.formatWindow.document.querySelector(a.pSelector)},70,function(a){m.domContentLoaded(b.formatWindow,a)}).then(function(b){a.logger.info("Target node found"),A(c,{moveTo:b,relationship:"child",view:d,slide:!1})}).catch(function(){a.logger.warn(a.id,a.pSelector,"Placement node from selector cannot be found in the format document. Maybe you should activate insertInTop")})},D=function(b,c){a.logger.info("Wait for leave the page"),q(a.pageLeaveDelay||4e3).then(function(){A(b,{view:c,slide:!1})})},E=function(a,b){A(a,{view:b,slide:!1})},F=function(b,c){a.waCfg?B(b,c):a.pSelector?C(b,c):a.onPageLeave?D(b,c):E(b,c)},G=function(a,b,c,d){return x[a].call(x,b,c,d?d.template:null)},H=function(b,c,d){a.logger.info("Format run directives"),f.start(c).then(function(b){a.waCfg&&a.placement.topWindow.aepwa._formatReady.resolve()}).catch(function(b){a.logger.warn(b)})},I=function(a,b){a.insertInTop||!a.isOwner||a.doNotModifyTagFrame||m.adjustIframeSize(a.tagWindow,b.width,b.height),m.adjustIframeSize(a.placement.formatWindow,b.width,b.height)},J=function(b,d,e){return n.get(d,{jsonp:{cbName:b}}).then(function(b){c=b.data;var d=c.metaData,f=[],g=d&&d.css?k.map(d.css,m.supportHttps):[],h=d&&d.externalLib?d.externalLib:[];return d&&e&&e(d),a.impAudit&&m.report(a.impAudit),k.forEach(g,function(b,c){f.push(new j(function(c,d){m.loadCSSFile(b,a.placement.formatWindow,c,d)}))}),k.forEach(h,function(b){m.loadJSFile(m.supportHttps(b.url),a.placement.formatWindow),f.push(m.wait(function(){return void 0!==a.placement.formatWindow[b.name]},30))}),"function"==typeof a.externalProcess&&(a.logger.info("Wait external process"),f.push(new j(a.externalProcess))),a.logger.info("Format wait template assets",f),j.all(f)})},K=function(d){if(g(a.tagWindow.admTopWindow).width()>=a.minViewportWidth){I(a,d.getWidth(),d.getHeight());var e={element:b.formatElement,config:a,template:c,formatModel:d};a.insertInTop&&a.isOwner&&m.hasAccessibleFrameElement(a.tagWindow)&&m.hideNodePersistently(a.tagWindow.frameElement),a.logger.info("Format create view");var f=G(d.contentType,d,e,c);"native"==f.type&&f.render(),H(c,e,d),F(d,f)}},L=function(){a.logger.info("Format load files");var b,c=a.service[0],d=[],f=a.pageCss?k.isArray(a.pageCss)?k.map(a.pageCss,m.supportHttps):[m.supportHttps(a.pageCss)]:[],g=a.hadInitiatedVisible?t.getId(a.tagWindow.admTopWindow):null,h=new u(c.targets,a);a.placement.cloakTagFrame(a.insertInTop&&a.isOwner),b=e.create(a,c,g,h),b.require(function(b){var e=v.create(b,a,c,g,h);if(e)if(a.logger.info("Service response",e.contentType+(e.compositeContentType?"+"+e.compositeContentType:""),e),a.events.dispatch("onServiceResponse",[a,e]),"passback"==e.contentType)K(e);else{var i=new r(e,a.userMetrics);if(i.init(),e.ready?(a.logger.info("Format wait async model","Content-type: "+e.contentType,e.ready),d.push(e.ready),e.ready.then(function(){a.events.dispatch("onThirdPartyByr",[a,e]),i.trackViewability()})):"e-commerce-group"!=e.contentType&&i.trackViewability(),a.placement.setCssClass(e.designId),e.hasDesign){d.push(J(e.designId,e.designUrl,e.setMetaData));var l=new j(function(b,c){m.loadCSSFile(e.designCssUrl,a.placement.formatWindow,b,c)});a.logger.info("Format wait design css",l),d.push(l)}k.forEach(f,function(b,c){m.loadCSSFile(b,m.getTopAccessWindow(a.placement.formatWindow))}),j.all(d).then(function(){a.logger.info("Format assets loaded",e),K(e)}).catch(function(b){a.logger.error(b)})}else a.logger.info("Nothing to show"),a.placement.remove()},m.report)};this.init=function(c){if(a=c,a.logger||(a.logger=new l(a.id,a.loggingDisabled)),a.hadInitiatedVisible=m.isPageVisible(),a.viewableImp&&(a.userMetrics=new s({name:a.id,hadInitiatedVisible:a.hadInitiatedVisible,expirationDays:15,vRateMinRecords:10,vRateMaxRecords:30,vTimeMinRecords:5,vTimeMaxRecords:15})),a.enableFreqCap){a.logger.info("Frequency cap is enabled by",a.freqCapHours?a.freqCapHours+" hours":"session");if(new w(a).shouldCap())return void a.logger.info("The frequency has reached the capping")}a.logger.info("Format init"),a.tagWindow.document.body||a.tagWindow.document.write("<body></body>"),a.tagWindow!=top&&a.tagWindow.document.close(),b=new h(a),a.placement=b,a.placement.ready.then(function(){if(a.startWhenInView){var b=m.getTopAccessWindow(),c=g(a.placement.rootElement).hiddenElementPosition();m.wait(function(){var d={height:a.height,top:c.top-b.pageYOffset,right:1,left:c.left};return d.bottom=d.top+a.height,i.getIntersection(new o(d),i.growRect(i.getViewportRect(b.document),a.viewThreshold)).area>0},100).then(function(){L()})}else L()}).catch(function(b){a.logger.error(b)}),a.onClickProduct=a.onClickProduct||new d},this.refresh=function(a){L()}};b.exports=y},{"./ad-service":10,"./device-context":16,"./directive-runner":18,"./dom":23,"./external":27,"./freq-cap":31,"./geometry":33,"./inline":37,"./lo":38,"./logger":39,"./model-factory":43,"./native-view":44,"./page-leaving":46,"./placement":50,"./rect":52,"./report-manager":53,"./signal":58,"./target-manager":64,"./third-party-view":67,"./user-metrics":70,"./utils":71,lie:8}],31:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./cookie"),f=function(a){var b=function(){return"aep-freq-cap-"+(a.freqCapGroup&&"tag"!=a.freqCapGroup?a.freqCapGroup:a.id)},c=function(){return a.freqCapHours?d.addHoursToDate(new Date,Number(a.freqCapHours)):null},f=new e(b(a));this.shouldCap=function(){return"1"==f.getCookie()||(f.setCookie("1",c()),!1)}};b.exports=f},{"./cookie":13,"./utils":71}],32:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./format-model"),f=a("./lo"),g=a("../node_modules/object-templating"),h={"ads[].cta":"ads[].tag.callToAction","ads[].longDescription":"ads[].tag.summary","ads[].description":"ads[].tag.headline","ads[].image":{path:"ads[].tag.secHqImage",helper:"pickLastUrl"},"ads[].thumbnail":"ads[].tag.secImage","ads[].url":"ads[].tag.clickUrl","ads[].imageOrThumbnail":"ads[].tag.portraitImage","ads[].isGemini":">true","ads[].sponsor":"ads[].tag.source","ads[].sponsorLabel":"ads[].tag.sponsoredByLabel","ads[].clickTracking":"ads[].tag.clickTrackingUrl"};g.registerHelper("pickLastUrl",function(a){return a.split("--/").pop()});var i=function(a,b,c,i,j){e.apply(this,arguments);var k=this,l=j.getData(a.trg),m=!!a.di,n=function(a){return a.image=d.secureImage(a.image,b.imageProxy),a.thumbnail=d.secureImage(a.thumbnail,b.imageProxy),a},o=function(){var a=g.create(l,h);k.ads=f.map(a.ads,n),f.forEach(k.ads,function(a,b){a.slot=b})};this.reportViewableBuyerImpressions=function(){d.report(f.reduce(l.ads,function(a,b){return a.push(b.beacon),a.concat(b.tag.imprTrackingUrl)},[]))},this.viewabilityPercentage=50,this.buyerId=a.byr,this.isDeferredImpression=m,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.vImpEventUrl=k.buildEventUrl("vimp"),this.vTimeEventUrl=k.buildEventUrl("vtime",{v:"[time]"}),this.ads=null,o()};b.exports=i},{"../node_modules/object-templating":9,"./format-model":29,"./lo":38,"./utils":71}],33:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./rect"),f=a("./percent"),g={getElementRect:function(a){return new e(a.getBoundingClientRect())},isInViewport:function(a,b,c){if(d.isWindow(a)){if(!d.isAccessible(a.parent)||!a.frameElement)return!0;a=a.frameElement}var e=g.getElementRect(a),f=c?g.transformRect(c,e):e,h=g.getViewportRect(a.ownerDocument),i=g.getIntersection(f,h),j=d.getWindow(a.ownerDocument);return d.isAccessible(j.parent)&&j.frameElement&&i.area>0?g.isInViewport(j.frameElement,b,g.transformRect(i,h)):g.getIntersection(f,g.growRect(h,b||0)).area>0},intersectsViewport:function(a,b){d.getWindow(a.ownerDocument)!=top&&(a=d.getHigherIframe(a));var c=g.getElementRect(a),e=g.getViewportRect(a.ownerDocument),h=g.getIntersection(c,e);return f.fromAbs(h.area,c.area)>=b},transformRect:function(a,b){return{top:a.top+b.top,bottom:a.bottom+b.top,left:a.left+b.left,right:a.right+b.left}},growRect:function(a,b){return new e({top:a.top-b,bottom:a.bottom+b,left:a.left-b,right:a.right+b})},getViewportRect:function(a){var b=a.documentElement,c=a.body,f=b.clientTop||c.clientTop||0,g=b.clientLeft||c.clientLeft||0,h=d.getViewportSize(a);return new e({top:f,left:g,bottom:h.height+f,right:h.width+g})},getIntersection:function(a){for(var b={left:[],top:[],right:[],bottom:[]},c=0;c<arguments.length;c++)b.left.push(arguments[c].left),b.top.push(arguments[c].top),b.right.push(arguments[c].right),b.bottom.push(arguments[c].bottom);return new e({left:Math.max.apply(Math,b.left),top:Math.max.apply(Math,b.top),right:Math.min.apply(Math,b.right),bottom:Math.min.apply(Math,b.bottom)})}};b.exports=g},{"./percent":49,"./rect":52,"./utils":71}],34:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a("./utils"),f=a("./lo");b.exports=function(a,b){return a.registerHelper("chunk",function(b,c,d){d=d&&d.length?d:[a.helpers.each];var e,f,g=c.hash.size,h=[];for(e=0,f=b.length;e<f;e+=g)h.push(b.slice(e,e+g));return d.shift().apply(this,[h,c,d])}),a.registerHelper("slice",function(b,c,d){d=d&&d.length?d:[a.helpers.each];var e="first"in c.hash?c.hash.first:0,f="last"in c.hash?c.hash.last+1:b.length;if("first"in c.hash&&"last"in c.hash&&"length"in c.hash)throw new Error("Too many options");return"length"in c.hash&&("last"in c.hash?e=f-c.hash.length:f=e+c.hash.length),b=b.slice(e,f),d.shift().apply(this,[b,c,d])}),a.registerHelper("split",function(c,d){if(!f.isString(c))return b.warn("split helper - Value"+c+"is not a string"),"";var g=c.split(d.hash.delimiter),h=parseInt(d.hash.index,10);"index"in d.hash&&(g=h<0||h>=g.length?"default"in d.hash?[d.hash.default]:[]:[g[h]]);for(var i=0;i<g.length;i++)g[i]=e.trim(g[i]);return d.fn=d.fn||function(a){return a},d.inverse=d.inverse||function(){return""},a.helpers.each.apply(this,[g,d])}),a.registerHelper("toUpperCase",function(a){return a.toUpperCase()}),a.registerHelper("ads",function(b){var c=[];if(b.hash.paginate&&(b.hash.size=b.hash.paginate,c.push(a.helpers.chunk)),c.push(function(b,c){for(var d=0;d<b.length;d++)b[d].first=0==d,b[d].last=d==b.length-1,b[d].firstTwo=d<2,b[d].even=d%2==0,b[d].odd=d%2!=0,b[d].lastOfThree=(d+1)%3==0,b[d].firstOfFive=d%5==0,b[d].secondOfFive=(d+4)%5==0,b[d].thirdOfFive=(d+3)%5==0,b[d].fourthOfFive=(d+2)%5==0,b[d].fifthOfFive=(d+1)%5==0;return a.helpers.each.apply(this,[b,c])}),this.ads){if("number"!=typeof this.ads.length)throw new Error("Helper 'ads' doesn't found the attribute ads at this level");return a.helpers.slice.apply(this,[this.ads,b,c])}throw new Error("HBS expects an array of 'ads' but the data corresponds to '"+this.contentType+"'")}),a.registerHelper("compare",function(a,b,c){if(arguments.length<3)throw new Error("Helper 'compare' needs 2 parameters");var e=c.hash.operator||"==",f={"==":function(a,b){return a==b},"===":function(a,b){return a===b},"!=":function(a,b){return a!=b},"<":function(a,b){return a<b},">":function(a,b){return a>b},"<=":function(a,b){return a<=b},">=":function(a,b){return a>=b},typeof:function(a,b){return(void 0===a?"undefined":d(a))==b}};if(!f[e])throw new Error("Helper 'compare' doesn't know the operator "+e);return f[e](a,b)?c.fn(this):c.inverse(this)}),a.registerHelper("equal",function(a,b,c){if(arguments.length<3)throw new Error("Helper 'equal' needs 2 parameters");return a!==b?c.inverse(this):c.fn(this)}),a.registerHelper("contains",function(a,b,c){for(var b=b.split(","),d=0;d<b.length;d++)b[d]=b[d].trim();return b.length>0&&-1!=b.indexOf(a)?c.fn(this):c.inverse(this)}),a.registerHelper("math",function(a,b,c){return a=parseFloat(a),c=parseFloat(c),{"+":a+c,"-":a-c,"*":a*c,"/":a/c,"%":a%c}[b]}),a}},{"./lo":38,"./utils":71}],35:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./dom-utils"),f=a("./utils"),g=a("lie"),h={};h.preload=function(a,b){return new g(function(c,d){a.onload=function(){c({width:a.width,height:a.height})},a.onerror=d,a.src=b})},h.adjustImageSize=function(a,b,c,g){var h=a.style,i=a.clientWidth,j=a.clientHeight,k=b/c;if(k>i/j==!g){var l=i/k;h.width=i+"px",h.height=l+"px",g||(h.marginTop=h.marginBottom=(j-l)/2+"px")}else{var m=j*k;h.width=m+"px",h.height=j+"px",g||(h.marginLeft=h.marginRight=(i-m)/2+"px")}var n=function(b){return e.css(a,b)};if(m>i||l>j){var o=a.ownerDocument.createElement("div"),p=o.style;f.extend(p,{width:i+"px",height:j+"px",overflow:"hidden",display:n("display"),position:n("position"),top:n("top"),float:n("float"),cssFloat:n("float"),marginTop:n("margin-top"),marginBottom:n("margin-bottom"),marginRight:n("margin-right"),marginLeft:n("margin-left"),borderRightColor:n("border-right-color"),borderRightStyle:n("border-right-style"),borderRightWidth:n("border-right-width"),borderLeftColor:n("border-left-color"),borderLeftStyle:n("border-left-style"),borderLeftWidth:n("border-left-width"),borderTopColor:n("border-top-color"),borderTopStyle:n("border-top-style"),borderTopWidth:n("border-top-width"),borderBottomColor:n("border-bottom-color"),borderBottomStyle:n("border-bottom-style"),borderBottomWidth:n("border-bottom-width")}),d(a).css({top:0}),"inline"==p.display&&(p.display="inline-block"),h.border="none",h.margin=0,a.parentNode.insertBefore(o,a),o.appendChild(a)}},b.exports=h},{"./dom":23,"./dom-utils":22,"./utils":71,lie:8}],36:[function(a,b,c){"use strict";var d=a("./image-utils"),e=a("./utils"),f=a("./dom"),g=a("./params"),h=a("lie"),i=a("./geometry"),j=function(a){var b=a.element,c=a.formatModel.fallbackImage,f=!1,j=new g(a.scope,{slot:null,tagIndex:null,src:null}),l=a.formatModel.getProduct(j.slot,j.tagIndex),m=l?l.cfg:{},n=new h(function(c,d){a.config.loadImagesWhenInView?e.poll(function(){return i.isInViewport(b.parentNode,a.config.viewThreshold)}).subscribe(c):c()});b.style.visibility="hidden";var o=n.then(function(e){return d.preload(b,a.value).catch(function(a){return f=!0,d.preload(b,c)})}).then(function(c){return a.config.disableAdjustImages||d.adjustImageSize(b,c.width,c.height,!f&&m.zoom),b.style.visibility="visible",h.resolve(b)}).catch(function(a){return h.reject("Image load could not be detected")});return a.config.loadImagesWhenInView&&k(a,o),o},k=function(a,b){var c=a.element,d=new g(a.scope,{loaderWidth:30,loaderHeight:7,loaderColor:"#48A500",loaderBackColor:"#D4D4D4"});c.insertAdjacentHTML("beforebegin",'<div class="adm-loader"><div class="adm-loader-wrapper"><div class="adm-loader-full"></div></div></div>');var e=!1,h=f(c.previousSibling),i=f(c.previousSibling.firstChild),j=f(c.previousSibling.firstChild.firstChild);h.css({width:"100%",height:"100%",position:"relative"}),i.css({top:"50%",left:"50%",width:d.loaderWidth,height:d.loaderHeight,position:"absolute",overflow:"hidden",marginTop:-d.loaderHeight/2,marginLeft:-d.loaderWidth/2,backgroundColor:d.loaderBackColor}),j.css({width:0,height:d.loaderHeight,position:"absolute",backgroundColor:d.loaderColor}),function a(){e||j.animate({width:d.loaderWidth},500,function(){j.animate({width:0,left:d.loaderWidth},500,function(){j.animate({left:0},0,a)})})}(),b.then(function(){e=!0,h.fadeOut(200)})};b.exports=j},{"./dom":23,"./geometry":33,"./image-utils":35,"./params":47,"./utils":71,lie:8}],37:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./utils"),f=a("./lo"),g=function a(b){var c=b.nextSibling;if(c){if(h(c))return c;c=a(c)}return c},h=function(a){return a.nodeType==document.TEXT_NODE&&!/\r|\n|\s/.test(a.nodeValue)||a.nodeType==document.ELEMENT_NODE&&"none"!=d(a).css("display")},i=function(a){return g(a)?a:a.parentNode},j=function(a){return m(a.firstElementChild)?a.firstElementChild:a.firstElementChild?g(a.firstElementChild):null},k=function(a){var b=m(a)?a:a.parentElement;return d(b).css("lineHeight",!0,!0)},l=function(a){var b=m(a)?a:a.parentElement;return d(b).css("fontSize",!0,!0)},m=function(a){return a&&a.nodeType==document.ELEMENT_NODE&&"BR"!=a.nodeName&&"META"!=a.nodeName},n=function(a){var b=k(a),c=l(a),d=a.getBoundingClientRect().height,f=0;return(e.isNear(d,b,1)||e.isNear(d,c,.2*c))&&(f=b),f},o=function(a,b){var c={top:"marginTop",bottom:"marginBottom"},e=m(b)?d(b).css(c[a],!0,!0):0;return e||"top"!=a||(e=n(b)),e},p=function(a){var b=g(a),c=a,d=b?o("top",b):0,e=c?o("bottom",c):0;return d||e?d&&e&&(d=e=0):d=e=k(a),[d,e]};b.exports={setInnerMargin:function(a,b){d(j(a)).css({marginTop:(b.top||0)+"px",marginBottom:(b.bottom||0)+"px"})},getMargin:function(a,b){var c;return c=b.waCfg.margin?f.map(b.waCfg.margin.replace("px","").split("|"),function(a){return parseInt(a)},[]):p(a),{top:c[0],bottom:c[1]}},getInsertionContext:function(a){return{target:i(a),relationship:"nextSibling"}}}},{"./dom":23,"./lo":38,"./utils":71}],38:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e={isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},isObjectLike:function(a){return!!a&&"object"==(void 0===a?"undefined":d(a))},isEmpty:function(a){if(null===a)return!0;if(e.isArray(a))return!a.length;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},forEach:function(a,b){if(e.isNumber(a.length))for(var c=0;c<a.length&&!1!==b(a[c],c);c++);else for(var d in a)if(a.hasOwnProperty(d)&&!1===b(a[d],d))break},map:function(a,b){var c=[];return e.forEach(a,function(){c.push(b.apply(this,arguments))}),c},reduce:function(a,b,c){return c=void 0===c?0:c,e.forEach(a,function(){c=b.apply(a,[c].concat(Array.prototype.slice.call(arguments)))}),c},filter:function(a,b){var c=[];return e.forEach(a,function(d){b.apply(a,arguments)&&c.push(d)}),c},
find:function(a,b){var c;return e.forEach(a,function(d){if(b.apply(a,arguments))return c=d,!1}),c},every:function(a,b){b=b||function(a){return!!a};var c=null;return this.forEach(a,function(){return null===c&&(c=!0),c=!(!c||!b.apply(a,arguments))}),c},some:function(a,b){return!!e.find(a,b)},assign:function(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},template:function(a){return function(b){return a.replace(/<%=\s*(\w+?)\s*%>/g,function(a,c){return b[c]||""})}}};b.exports=e},{}],39:[function(a,b,c){"use strict";var d=function(a,b){var c=function(c,d){if(d=Array.prototype.slice.call(d),!b&&window.console&&window.console.log){try{var e="\t\t"+(new Error).stack.split("\n")[3]}catch(f){}d.unshift("[AEP] "+c+" ["+a+"] "),d.push(e),console.log.apply(console,d)}};this.debug=function(){c.apply(this,["[DEBUG]",arguments])},this.info=function(){c.apply(this,["[INFO] ",arguments])},this.warn=function(){c.apply(this,["[WARN] ",arguments])},this.error=function(){c.apply(this,["[ERROR]",arguments])}};b.exports=d},{}],40:[function(a,b,c){"use strict";a("./manager"),_aep.push(["core","aep-formats-22.5.2"]),_aep.External=a("./external"),_aep.utils=a("./lo").assign({},a("./utils"),a("./lo"))},{"./external":27,"./lo":38,"./manager":41,"./utils":71}],41:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./signal"),g=a("./format"),h=a("./logger"),i=a("./external"),j=function(a){var b={},c={},e={},j=new f(!0),k=this,l=function(a,b){var d=a.core.match(/aep\-\w+\-\d+\.\d+\.\d+/).join();c[d]=c[d]||new f,c[d].subscribe(b)};for(this.tag=function(a,c){b[a]=c},this.format=function(a){a.logger=new h(a.id,a.loggingDisabled),a.inline&&(a.waCfg=a.inline),a.isTopFormat&&(a.insertInTop=!0,a.wrapInIframe=!1),a.forceDefault||d.extend(a,b[a.id]),a.tagWindow=window,a.tagWindow.admTopWindow=d.getTopAccessWindow(),a.tagWindow.admTopWindow.admTopWindow=a.tagWindow.admTopWindow,a.sharedData=j,e[a.id]=e[a.id]||new f,e[a.id].dispatch(a),a.waCfg&&(a.insertInTop||a.logger.warn("AEP-WA should be used with insertInTop=true"),a.wrapInIframe&&a.logger.warn("AEP-WA should be used with wrapInIframe=false")),l(a,function(){(new g).init(a)})},this.core=function(a){c[a]=c[a]||new f,c[a].dispatch()},this.refresh=function(a,b){e[a]=e[a]||new f,e[a].subscribe(function(a){l(a,function(c){d.extend(a,b||{}),c.Format.refresh(a)})})},this.log=function(a){j.subscribe(a)},this.push=function(a){k[a[0]]&&k[a[0]].apply(k,a.slice(1))},this.template=function(a,b,c,d){i.set(a,{template:b,js:c,metaData:d})};a&&a.length;)k.push(a.shift())};window._aep&&!e.isArray(window._aep)||(window._aep=new j(window._aep)),b.exports=j},{"./external":27,"./format":30,"./lo":38,"./logger":39,"./signal":58,"./utils":71}],42:[function(a,b,c){"use strict";var d=a("./signal"),e=a("./utils"),f=function(a,b,c){var f=new d(!0),g=e.getFullDomain(c);e.addEventListener(a,"message",function(a){a.origin==g&&f.dispatch(e.parseIfJson(a.data))}),this.send=function(a,c){b.postMessage(JSON.stringify(c),g)},this.receive=function(a){f.subscribe(a)}};f.isSupported=function(){return"function"==typeof window.postMessage},b.exports=f},{"./signal":58,"./utils":71}],43:[function(a,b,c){"use strict";var d={"e-commerce":a("./ecommerce-model"),"e-commerce-group":a("./ecommerce-group-model"),criteo:a("./criteo-model"),oath:a("./oath-model"),gemini:a("./gemini-model"),"third-party-buyer":a("./third-party-buyer-model"),"third-party-display":a("./third-party-display-model"),video:a("./video-model"),display:a("./display-model"),passback:a("./passback-model")},e={"e-commerce":"e-commerce","e-commerce-group":"e-commerce",criteo:"e-commerce",oath:"e-commerce",gemini:"e-commerce","third-party-display":"display",display:"display",video:"video","third-party-buyer":null,passback:null},f={getContentType:function(a,b){if(!a.byr||!a.bct)return a.tags&&a.tags.length>0?"e-commerce-group":a.ads&&a.ads.length>0?"e-commerce":2==a.mt?"display":3==a.mt?"video":b.passback?"passback":"none";switch(a.bct){case"100":return a.trg.match(/^gem=/)?"gemini":"criteo";case"211":return"third-party-buyer";case"210":return"third-party-display";case"300":return"video";default:return"none"}},create:function(a,b,c,g,h){var i=null,j=null,k=f.getContentType(a,b,h);d[k]&&(i=new d[k](a,b,c,g,h));var l=h.getData("oath=1");l&&l.ads&&l.ads.length>0&&(j=new d.oath(a,b,c,g,h),"e-commerce"!=k&&"criteo"!=k||(i.ready?i.ready.then(function(){j.compose(i.ads)}):j.compose(i.ads),j.compositeContentType=k),k="oath");var m=j||i;return m&&(m.contentType=k,m.mediaType=e[k]),m}};b.exports=f},{"./criteo-model":15,"./display-model":19,"./ecommerce-group-model":24,"./ecommerce-model":25,"./gemini-model":32,"./oath-model":45,"./passback-model":48,"./third-party-buyer-model":65,"./third-party-display-model":66,"./video-model":72}],44:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./dom");b.exports=function(b,c,f){var g=b.config,h=a("./handlebars-helpers")(a("../node_modules/handlebars/dist/cjs/handlebars.runtime").default,g.logger);return g.sharedData.dispatch(b.contentType,d.extend([],b.ads||b.tags,{deep:!0})),{type:"native",render:function(){g.logger.info("Render native-view"),c.element.innerHTML=h.template(f)(b),c.template.js&&c.template.js(function(a,b){return e(a,b||c.element.ownerDocument)},g.placement.formatWindow,g.placement.formatWindow.document,{formatReady:g.placement.onShow}),g.insertInTop||g.placement.unCloakTagFrame()}}}},{"../node_modules/handlebars/dist/cjs/handlebars.runtime":1,"./dom":23,"./handlebars-helpers":34,"./utils":71}],45:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./format-model"),f=a("lie"),g=a("./lo"),h=a("../node_modules/object-templating"),i={"ads[].cta":"ads[].tag.callToAction","ads[].longDescription":"ads[].tag.summary","ads[].description":"ads[].tag.headline","ads[].image":{path:"ads[].tag.secHqImage",helper:"pickLastUrl"},"ads[].thumbnail":"ads[].tag.secImage","ads[].url":"ads[].tag.clickUrl","ads[].imageOrThumbnail":"ads[].tag.portraitImage","ads[].isOath":">true","ads[].sponsor":"ads[].tag.source","ads[].sponsorLabel":"ads[].tag.sponsoredByLabel","ads[].clickTracking":"ads[].tag.clickTrackingUrl"};h.registerHelper("pickLastUrl",function(a){return a.split("--/").pop()});var j=function(a,b,c,j,k){e.apply(this,arguments);var l,m,n=this,o=k.getData("oath=1"),p=o.ads.length,q=!!a.di,r=function(a){return a.image=d.secureImage(a.image,b.imageProxy),a.thumbnail=d.secureImage(a.thumbnail,b.imageProxy),a},s=function(a){return 1==p||2==p||3==a&&4==p},t=function(){var a=h.create(o,i);l=g.map(a.ads,r),g.forEach(l,function(a,b){a.isFeatured=s(b)})};this.reportViewableBuyerImpressions=function(){d.report(g.reduce(o.ads,function(a,b){return a.push(b.beacon),a.concat(b.tag.imprTrackingUrl)},[]))},this.viewabilityPercentage=50,this.buyerId=a.byr,this.isDeferredImpression=q,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.vImpEventUrl=n.buildEventUrl("vimp"),this.vTimeEventUrl=n.buildEventUrl("vtime",{v:"[time]"}),this.ready=new f(function(a,b){m=a}),this.ads=null,this.layout="layout-"+p,this.compose=function(a){n.ads=l.concat(a),g.forEach(n.ads,function(a,b){a.slot=b}),m()},t()};b.exports=j},{"../node_modules/object-templating":9,"./format-model":29,"./lo":38,"./utils":71,lie:8}],46:[function(a,b,c){"use strict";var d=a("./utils"),e=a("lie"),f=function(a){return a<0&&a>-90},g=function(a){return a>90&&a<d.getViewportSize().width-140},h=function(a){var b=[];b.push({x:0,y:0}),b.push({x:0,y:0}),a.addEventListener("mousemove",function(a){b.shift(),b.push({x:a.pageX,y:a.pageY})}),this.getCoords=function(){return{x:2*b[1].x-b[0].x,y:2*b[1].y-b[0].y}}},i={create:function(a){return d.isIE()?new h(a):{getCoords:function(a){return{x:a.pageX,y:a.pageY}}}}};b.exports=function(a){var b=d.getTopAccessWindow(),c=i.create(b),h=b.document.documentElement;return new e(function(b,d){setTimeout(function(){h.addEventListener("mouseleave",function(a){var d=c.getCoords(a);!a.relatedTarget&&g(d.x)&&f(d.y)&&b()})},a)})}},{"./utils":71,lie:8}],47:[function(a,b,c){"use strict";var d=a("./lo"),e=function(a,b){var c=this;this.add=function(a){d.forEach(a,function(a,b){c[b]=c[b]||a})},d.forEach(a,function(a,b){for(var d=[],e=0;e<a.length;e++)d.push(a[e].value||a[e].element);c[b]=d.length>1?d:d[0]}),c.add(b)};b.exports=e},{"./lo":38}],48:[function(a,b,c){"use strict";var d=function(a,b,c,d){this.config=b,this.passbackMode=b.passback.mode,b.passback.mode||(b.passback.useIframe?this.passbackMode="in-iframe":this.passbackMode="in-place"),this.url=b.passback.src,this.getWidth=function(){return b.width},this.getHeight=function(){return b.height}};b.exports=d},{}],49:[function(a,b,c){"use strict";var d={fromAbs:function(a,b){return Math.round(100*a/b)},toAbs:function(a,b){return Math.round(a/100*b)}};b.exports=d},{}],50:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./signal"),f=a("lie"),g=a("./dom"),h=a("./aspect-ratio"),f=a("lie"),i=a("./tweening"),j=a("./split-placement"),k=function(a){var b,c,k=this,l="aep-placement-"+a.id,m=a.tagWindow,n=d.getTopAccessWindow(),o={top:0,bottom:0},p=new i.Player,q=function(){var a;try{a=(m.document.body.id.match(/dapIfM\d(?:Child)?$/)||m.frameElement.id.match(/atwAdFrame\d(?:Child)?$/)).join()}catch(b){}return a?m.parent.document.getElementById(a):null},r=function(b){var c;return a.wrapInIframe?(l+="-frame",c=d.createBorderlessIframe(b.document,l)):(c=b.document.createElement("div"),c.id=l,a.waCfg&&g(c).css({overflow:"hidden",height:"0",marginTop:"0",paddingTop:"0",marginBottom:"0"}).addClass("aep-inline")),g(c).addClass("aep-root").cloak(),c},s=function(){var c=k.rootElement;c.parentNode&&c.parentNode.removeChild(c),a.waCfg&&k.topWindow.aepwa._formatReady.reject("format removed"),b&&b.remove(),a.removed=!0,k.onAfterRemove.dispatch()},t=function(){return(k.aspectRatio.isEnabled()?k.aspectRatio.getHeight():c)+o.top+o.bottom},u=function(){var b=a.insertInTop?n:m;return q(b.document)||d.getOuterAccessibleFrame(m)},v=function(a){g(a).css({marginLeft:"auto",marginRight:"auto"})},w=function(){k.targetWindow=a.insertInTop?n:m,k.rootElement=r(k.targetWindow),k.topWindow=n,k.tagWindow=m,k.outerFrameElement=u(),k.aspectRatio=new h(a),k.status="hidden";var b=k.getTargetNode();if("body"==b.nodeName.toLowerCase()?k.insertInto(b):k.insertBefore(b),k.targetNode=new f(function(c,d){a.waCfg?n.aepwa.target.then(c,d):c(b)}),k.onShow.subscribe(function(){a.events.dispatch("onFormatReady",[a])}),a.wrapInIframe){var c=k.rootElement.contentWindow;c.document.write("<!DOCTYPE html><html><head></head><body></body></html>"),c.document.close(),c.admTopWindow=n,k.formatWindow=c,k.formatElement=c.document.body,k.viewableElement=d.getOuterAccessibleFrame(c)}else k.formatWindow=k.targetWindow,k.formatElement=k.rootElement,k.viewableElement=k.rootElement;k.ready=new f(function(b,c){if(m.$sf&&m.$sf.ext){var d=m.$sf.ext,e=!0;d.register(a.width,a.height,function(a){"register"!=a&&e&&(e=!1,b())}),e&&d.status&&void 0!=d.status()&&(e=!1,b())}else b()})};this.setMargin=function(a){o=a},this.setCssClass=function(b){var c=" aep-ads"+(b!=a.id?" aep-design-"+b:"");k.rootElement.className=k.rootElement.className+c},this.initAspectRatio=function(){b?k.aspectRatio.setReferenceElement(b.getMaster(),o):k.aspectRatio.setReferenceElement(k.rootElement)},this.split=function(a){b=new j,b.createMaster(a||k.getTargetNode()),b.setSlave(k.rootElement),b.start(),k.masterElement=b.getMaster()},this.updateSplitIfAny=function(){b&&b.update()},this.insertInto=function(a){a.appendChild(k.masterElement||k.rootElement)},this.insertBefore=function(a){a.parentNode.insertBefore(k.masterElement||k.rootElement,a)},this.insertAfter=function(a){a.parentNode.insertBefore(k.masterElement||k.rootElement,a.nextSibling)},this.setWidth=function(a,b){g(k.masterElement||k.rootElement).css({width:a+b})},this.setHeight=function(a,b){b?c=a:g(k.masterElement||k.rootElement).css({height:a+"px"})},this.show=function(b,c){a.logger.info("Placement show"),a.center&&v(k.masterElement||k.rootElement),g(k.rootElement).unCloak(),k.status="visible",c&&(k.initAspectRatio(),k.aspectRatio.setRatio(c)),b?c?(k.aspectRatio.scaleInnerElements(),k.slide(t(),function(){k.aspectRatio.start()})):k.slide(t()):c&&k.aspectRatio.start(),k.onShow.dispatch()},this.slide=function(c,d){p.initialize({height:k.rootElement.offsetHeight||0},i.Functions.getNormalizedExtern("easeOutCubic")),p.onFrame=function(a){g(k.rootElement).css({height:a.height+"px"}),b&&b.setHeight(a.height+"px")},p.onStop=function(){d&&d()},p.gotoKey(a.waCfg&&a.waCfg.animDuration?a.waCfg.animDuration:800,{height:c})},this.remove=function(b){a.logger.info("Remove placement"),k.aspectRatio&&k.aspectRatio.stop(),k.onBeforeRemove.dispatch(),b?k.slide(0,s):s(),k.status="removed"},this.getTargetNode=function(){var b,c=a.insertInTop?n:m;return a.insertInTop&&(b=a.waCfg?c.document.body.firstChild||c.document.body:k.outerFrameElement),b||(b=c.document.getElementById(a.ownerId)),b&&c.document.body.contains(b)||(a.logger.warn("Tag cannot be found into the body"),b=c.document.body.firstChild||c.document.body),b},this.cloakTagFrame=function(b){a.doNotModifyTagFrame||k.outerFrameElement&&(b?d.hideNodePersistently(k.outerFrameElement):g(k.outerFrameElement).cloak())},this.unCloakTagFrame=function(){a.doNotModifyTagFrame||k.outerFrameElement&&g(k.outerFrameElement).unCloak()},this.getWaNode=function(){return n.aepwa.target},this.onShow=new e(!0),this.isShown=new f(function(a,b){k.onShow.subscribe(a)}),this.onAfterRemove=new e(!0),this.onBeforeRemove=new e(!0),w()};b.exports=k},{"./aspect-ratio":11,"./dom":23,"./signal":58,"./split-placement":60,"./tweening":69,"./utils":71,lie:8}],51:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./params"),f=function(a,b,c,f){var g=new e(c,{close:null,autoClose:null}),h=function(){a.placement.remove(!!a.waCfg)},i=function(){g.autoClose&&setTimeout(h,1e3*g.autoClose)};this.init=function(){c.close&&d(g.close).on("click",h),a.placement.onShow.subscribe(i)}};b.exports=f},{"./dom":23,"./params":47}],52:[function(a,b,c){"use strict";var d=a("./lo"),e=function(a){a=a||{},this.left=d.isNumber(a.left)?a.left:d.isNumber(a.right)?a.right-a.width:0,this.top=d.isNumber(a.top)?a.top:d.isNumber(a.bottom)?a.bottom-a.height:0,this.right=d.isNumber(a.right)?a.right:d.isNumber(a.width)?(a.left||0)+a.width:0,this.bottom=d.isNumber(a.bottom)?a.bottom:d.isNumber(a.height)?(a.top||0)+a.height:0,this.width=this.right-this.left,this.height=this.bottom-this.top,this.area=Math.max(this.width,0)*Math.max(this.height,0)};b.exports=e},{"./lo":38}],53:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./reporter.js"),f=a("./timer.js"),g=a("./viewable.js"),h=function(a,b){var c=a.config,h=new e(c.reporting,c.deferredImpression,a);this.init=function(){a.isDeferredImpression?c.placement.onShow.subscribe(function(){h.reportDeferredImpression(a.deferredImpressionHash),h.reportTrackingImpression(),a.reportBuyerImpressions&&a.reportBuyerImpressions()}):(h.reportTrackingImpression(),a.reportBuyerImpressions&&a.reportBuyerImpressions())},this.trackViewability=function(){if(c.viewableImp){var e,i=new g(c,c.placement.viewableElement,a.viewabilityPercentage),j=new f(100,12e4);i.onFirstView.then(function(){h.reportViewableImpression(),a.reportViewableBuyerImpressions&&a.reportViewableBuyerImpressions(),b.registerViewableImpression(),e=setInterval(function(){b.updateViewabilityTime(j.getElapsedTime())},5e3),d.addEventListener(c.tagWindow.admTopWindow,"unload",function(){h.reportViewableTime(j.getElapsedTime()),b.updateViewabilityTime(j.getElapsedTime()),clearInterval(e),j.stop(),i.stop()})}),i.onViewable.subscribe(function(){j.start()}),i.onHidden.subscribe(function(){j.stop()}),c.waCfg?c.placement.onShow.subscribe(i.start):i.start()}}};b.exports=h},{"./reporter.js":54,"./timer.js":68,"./utils":71,"./viewable.js":73}],54:[function(a,b,c){"use strict";var d=a("./utils.js"),e=function(a,b,c){this.reportViewableImpression=function(){d.report(d.replaceTokens(c.vImpEventUrl,{rnd:d.generateNumericKey(6)}))},this.reportViewableTime=function(a){d.report(d.replaceTokens(c.vTimeEventUrl,{rnd:d.generateNumericKey(6),time:d.msToSec(a)}))},this.reportDeferredImpression=function(a){d.report(b+"?"+d.buildQuery({di:a,r:d.generateNumericKey(6)}))},this.reportTrackingImpression=function(){d.report(c.trackingImp||[])}};b.exports=e},{"./utils.js":71}],55:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./signal"),f={_instances:{},get:function(a,b,c){var e=c?b.admTopWindow:f._instances,g="_aep_request_"+(c||d.generateKey(6));return e[g]||(e[g]=new f.Instance(a,b))},Instance:function(a,b){var c=new e,f=new e;this._registerCallback=function(a,c,d){if(a[c]){for(var e=a[c].split("."),f=b;e.length>1;){var g=e.shift();f=f[g]=f[g]||{}}for(var h=e.shift(),i="";f[h+i];)i++;f[h+i]=d,a[c]+=i}},this.subscribe={cb:c.subscribe,ccb:f.subscribe},a.parameters.cb=a.parameters.cb||"aep.ads",this._registerCallback(a.parameters,"cb",c.dispatch),this._registerCallback(a.parameters,"ccb",f.dispatch);var g={};for(var h in a.parameters)if(a.parameters.hasOwnProperty(h))switch(h){case"cb":g[h]="aep.ads"==a.parameters.cb?"":a.parameters.cb;break;case"trg":g[h]=a.parameters.trg;break;default:g[h]=a.parameters[h]}g.rnd=d.generateNumericKey(5);var i=a.base+"?"+d.buildQuery(g);d.loadJSFile(i,b)}};b.exports=f},{"./signal":58,"./utils":71}],56:[function(a,b,c){"use strict";var d=a("./params"),e=a("./utils"),f=a("./dom");a("./dom-tweening");var g=function a(b,c,g){var h,i,j,k,l,m,n=new d(g,{tabWidth:38,animationTime:350,reminderExpandDuration:100,autoCollapseTime:6e4,collapsedState:{tab:{right:-153},reminder:{right:-4}},expandedState:{tab:{right:-32},reminder:{right:-36}},openInterval:100}),o=f(b.placement.formatWindow),p=n.collapsedState,q=!0,r=e.isSafari(),s=b.placement.formatWindow.document,t=function(a){if(q){var c=b.minViewportWidth-2*n.tabWidth,d=(o.width()-c)/2,e=i.width();d<a+e&&(a=d-e)}return a},u=function(){h.animate(n.collapsedState.reminder,n.animationTime,"easeOutBack"),i.animate(n.collapsedState.tab,n.animationTime,"easeOutBack"),p=n.collapsedState,q=!0,k.removeClass("open-ad"),l.css({top:3}),m.stop()},v=function(a){a?(p!=n.expandedState&&(q=!1),h.animate(n.expandedState.reminder,n.reminderExpandDuration,"linear")):h.css(n.expandedState.reminder),i.animate(n.expandedState.tab,n.animationTime,"easeInOutBack",function(){r||k.each(function(a,b){a=f(a),setTimeout(function(){a.addClass("open-ad"),a.removeClass("perspective-initial")},b*n.openInterval)})},function(a){return a.right=t(a.right),a}),r||k.addClass("perspective-initial"),p=n.expandedState,m.start()};this.init=function(){if(h=f("#reminder",s),i=f("#sidetabs-content",s),j=f("#btn-close",s),k=f(".st-ad",s),l=f(".ad-content",s),m=new a.Showcase(l),h.click(u).on("mouseover",function(){v(!0)}).css(n.collapsedState.reminder),j.click(u).hover(function(){f(this).addClass("closeExpanded")},function(){f(this).removeClass("closeExpanded")}),k.on("mousedown",function(){f(this).addClass("pressed-ad")}).on("mouseout mouseup",function(){f(this).removeClass("pressed-ad")}),void 0!==b.placement.formatWindow.document.documentElement.onmouseenter)l.hover(function(a){(a.srcElement||a.target)==this&&(m.stop(),m.open(this))},function(a){(a.srcElement||a.target)==this&&(m.close(this),m.start())});else{var c;l.each(function(a){var d=a.parentNode.parentNode;f(d).bind("mouseover",function(){a!=c&&(c&&m.close(c),c=a,m.stop(),m.open(c))}),f(b.placement.formatWindow).on("mousemove",function(a){c&&!e.inRect(a.clientX,a.clientY,c.parentNode.parentNode.getBoundingClientRect())&&(m.close(c),m.start(),c=null)})})}o.on("resize",function(){i.css({right:t(p.tab.right)})}),v(!1),setTimeout(u,n.autoCollapseTime)}};g.Showcase=function(a){var b,c,d,e=this;this.start=function(){d=0,!c&&a.length>1&&(b=-1,c=setInterval(e.next,1500))},this.stop=function(){c&&(clearInterval(c),c=null,b>=0&&e.close(a.get(b)))},this.next=function(){a.length&&(b>=0&&e.close(a.get(b)),b++,b>=a.length&&(b=0,d++),d<2?e.open(a.get(b)):(b=-1,e.stop()))},this.open=function(a){f(a).animate({top:-114},100,"easeInOutCubic")},this.close=function(a){f(a).animate({top:2},100,"easeInOutCubic")}},b.exports=g},{"./dom":23,"./dom-tweening":21,"./params":47,"./utils":71}],57:[function(a,b,c){"use strict";var d=a("./tweening"),e=a("./dom"),f=function(a){var b,c=function(a,b){this.tabRight=a,this.reminderLeft=b},f=38,g=500,h=6e4,i=a.minViewportWidth-2*f,j=new d.Player,k=new c(-115,0),l=new c(0,28),m=k,n=!0,o=a.placement.formatWindow.document,p=function(){return(e(a.placement.formatWindow).width()-i)/2},q=function(a,c){if(n){var d=p(),e=k.tabRight-b.width()+c;d<a-e&&(a=d+e)}return a},r=function(){j.isPlaying()||(m=k,n=!0,j.initialize({tabRight:l.tabRight,reminderLeft:l.reminderLeft},d.Functions.getNormalizedExtern("easeOutBack")),j.gotoKey(g,{tabRight:k.tabRight,reminderLeft:k.reminderLeft}))},s=function(a){j.isPlaying()||(a&&m!=l&&(n=!1),m=l,j.initialize({tabRight:k.tabRight,reminderLeft:k.reminderLeft},d.Functions.getNormalizedExtern("easeInOutBack")),j.gotoKey(g,{tabRight:l.tabRight,reminderLeft:l.reminderLeft}))};this.init=function(){var c=e("#btn-close",o),d=e("#sidetabs-content",o);b=e("#reminder",o),d.css({right:k.tabRight}),b.css({left:k.reminderLeft}),j.onFrame=function(a){d.css({right:q(a.tabRight,a.reminderLeft)}),b.css({left:a.reminderLeft})},s(!1),c.click(r),b.click(r),b.on("mouseover",function(){s(!0)}),c.on("mouseover",function(){c.addClass("closeExpanded")}),c.on("mouseout",function(){c.removeClass("closeExpanded")}),setTimeout(r,h),e(a.placement.formatWindow).on("resize",function(){d.css({right:q(m.tabRight,m.reminderLeft)})})}};b.exports=f},{"./dom":23,"./tweening":69}],58:[function(a,b,c){"use strict";var d=function(a){var b,c=[],d=this;this.dispatch=function(e){for(var f=0;f<c.length;f++)c[f].apply(d,arguments);a||(c=[],b=arguments)},this.subscribe=function(e){return b&&!a?e.apply(d,b):c.push(e),d}};b.exports=d},{}],59:[function(a,b,c){"use strict";var d=a("./params"),e=a("./dom");a("./dom-tweening");var f=function(a,b,c){var f,g,h,i,j,k,l,m=this,n=0,o=a.placement.formatWindow.document,p=new d(c,{autoMoveTime:5e3,moveDuration:500,itemsPerPage:1,buttonEnabledClass:"active",buttonDisabledClass:"null",progressUpdateInterval:30,pagesContainer:null,progressBar:null,rightButton:null,leftButton:null,buttonsContainer:null,numberOfPages:null}),q=e(p.pagesContainer,o),r=function(a){var b=0,c=0;return q.children().each(function(d,f){f==a&&(b=c),c+=e(d).outerWidth()}),b},s=function(){n<k-1&&u(1)},t=function(){n>0&&u(-1)},u=function(a){m._setPage(n+a)};this._switchPage=function(a,b){q.animate({marginLeft:-r(b)},p.moveDuration)},this._setPage=function(a){m._switchPage(n,a),n=a,m._updateButtons(),w(),e(q.children().get(a)).trigger("show")};var v=function(){var a=(new Date-j)/p.autoMoveTime;a<1&&e(p.progressBar,o).css({width:100*a+"%"})},w=function(){p.autoMoveTime>0&&(f&&clearTimeout(f),j=new Date,!g&&p.progressBar&&(g=setInterval(v,p.progressUpdateInterval)),f=n==k-1?setTimeout(x(u,1-k),p.autoMoveTime):setTimeout(s,p.autoMoveTime))},x=function(a,b){var c=[];return c.push.apply(c,arguments),c.shift(),function(){a.apply(this,c)}},y=function(a){a.addClass(p.buttonEnabledClass),a.removeClass(p.buttonDisabledClass)},z=function(a){a.removeClass(p.buttonEnabledClass),a.addClass(p.buttonDisabledClass)};this._bindButtons=function(){p.rightButton&&p.leftButton&&(h=e(p.rightButton,o),i=e(p.leftButton,o),y(h),z(i),h.click(s),i.click(t)),p.buttonsContainer&&(l=e(p.buttonsContainer,o).children(),l.each(function(a,b){e(a).click(function(){m._setPage(b)})}))},this._updateButtons=function(){i&&h&&(0==n?z(i):y(i),n==k-1?z(h):y(h)),l&&(l.removeClass(m.params.buttonEnabledClass),e(l.get(m._getCurrentPage())).addClass(m.params.buttonEnabledClass))},this._getCurrentPage=function(){return n},this.init=function(){k=p.numberOfPages||e(p.pagesContainer,o).children().length/p.itemsPerPage,m._bindButtons(),m._updateButtons(),w()},this.params=p};b.exports=f},{"./dom":23,"./dom-tweening":21,"./params":47}],60:[function(a,b,c){"use strict";var d=a("./dom"),e=function(){var a,b,c,e=this;this.update=function(){var a=d(c).position();d(b).css({width:c.offsetWidth+"px",position:"absolute",left:a.left+"px",top:a.top+"px"})},this.createMaster=function(a){c=a.ownerDocument.createElement("div"),d(c).addClass("adm-master-placement"),d(c).css({height:0}),a.parentNode.insertBefore(c,a)},this.setHeight=function(a){d(c).css({height:a})},this.setSlave=function(a){b=a,d(b).addClass("adm-slave-placement")},this.getMaster=function(){return c},this.start=function(){e.update(),a=setInterval(e.update,50)},this.stop=function(){clearInterval(a)},this.remove=function(){c.parentNode.removeChild(c)}};b.exports=e},{"./dom":23}],61:[function(a,b,c){"use strict";var d=a("./cookie"),e=a("./utils"),f=function(a){var b,c=new d(a.name),f=-1,g=function(a,b){return a=a.slice(-b)},h=function(b){c.setCookie(b.join(a.separator),e.addDaysToDate(new Date,a.expirationDays))};this.getValues=function(){var b=c.getCookie();return b?g(b.split(a.separator),a.maxRecords):[]},this.getCurrentValue=function(){return b[f]},this.setCurrentValue=function(a){b[f]=a,h(b)},this.addRecord=function(){b.push(0),b=g(b,a.maxRecords),f=b.length-1,h(b)},b=this.getValues()};b.exports=f},{"./cookie":13,"./utils":71}],62:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./messenger"),f=function(){var a=d.getInternetExplorerVersion();return-1==a||a>=9},g=function(){var a=d.iOSVersion();return!a||a[0]>=10},h=function(){return e.isSupported()&&f()&&g()},i=function(){return h()&&!!document.createElement("video").canPlayType},j=function(){var a=[];return h()||a.push(2),i()||a.push(3),a.join()};b.exports={getUMT:j}},{"./messenger":42,"./utils":71}],63:[function(a,b,c){"use strict";var d=a("./cookie"),e=a("./utils"),f=function(a,b){var c="byr"+(b||"")+a,f=new d(c);this.isEmpty=function(a){return void 0===a},this.isDisabled=function(){return"1"==f.getCookie()},this.disableTarget=function(a){var a=a||15;f.setCookie("1",e.addMinutesToDate(new Date,a))}};b.exports=f},{"./cookie":13,"./utils":71}],64:[function(a,b,c){"use strict";var d=a("./utils"),e=a("lie"),f=a("./target-disabler"),g=a("./lo"),h=function(a,b){var c=new f(i,"crt"),h=b.tagWindow,i=b.id,j={},k={},l=function(a){return"/"==a.slice(-1)?a:a+"/"},m=function(a,b){for(var c=0;c<b.length;c++)if(l(a)==l(b[c]))return!0;return!1},n=function(a,b){switch(a){case"criteo-multi":return"crt"+b+"=1";case"chb":return"crt="+b;case"idg":return"idg="+b;case"idd":return"idd="+b;case"oath":return"oath=1";case"gemini":return"gem="+b;default:return""}},o=function(a){return g.reduce(a||[],function(a,b){return a+="|"+b},"")},p=function(a,b){var c=a.url,f=a.requestWait,i=a.blackList;return new e(function(e,l){var o=d.generateKey(10);h[o]=function(c){if(clearTimeout(q),0!==c.response_status)l({msg:"EndPoint "+b+" without data"});else if(i&&m(c.advertiser.domain,i))l({msg:"Domain '"+c.advertiser.domain+"' is in blacklist. ZoneId: "+b});else{var d=n("criteo-multi",b);j[d]=c,k[d]=g.assign({},a),k[d].zoneId=b,e(d)}};var p=c+"?"+d.buildQuery({zoneid:b,callback:o,publisherid:null});d.loadJSFile(p,h);var q=setTimeout(function(){l({msg:"Criteo EndPoint timeout"})},f||3e4)})},q=function(a){return"ad"==a.children[0].children[0].nodeName.toLowerCase()},r=function(a){return-1==a.indexOf("NO AD")},s=function(a){var b=a.url,c=a.id,f=a.requestWait;return f=f||1e4,new e(function(e,h){d.ajax(g.template(b)({id:c}),{responseType:"xml"}).then(function(b){if(q(b)){var d=n("idg",c);j[d]=b,k[d]=a,e(d)}else h({msg:"IDG VAST ("+c+") responded no ads"})}).catch(function(){h({msg:"Could not complete IDG request"})}),setTimeout(function(){h({msg:"IDG EndPoint timeout"})},f)})},t=function(a){var b=a.url,c=a.id,f=a.requestWait;return f=f||1e4,new e(function(e,h){d.ajax(g.template(b)({id:c,w:a.width,h:a.height,tz:(new Date).getTimezoneOffset()}),{responseType:"text"}).then(function(b){if(r(b)){var d=n("idd",c);j[d]=b,k[d]=a,e(d)}else h({msg:"IDG Display ("+c+") responded no ads"})}).catch(function(){h({msg:"Could not complete IDG request "+c})}),setTimeout(function(){h({msg:"IDG EndPoint timeout "+c})},f)})},u=function(a){var b=a.url,c=a.zoneId,f=a.requestWait,l=a.blackList;return f=f||1e4,h.Criteo=h.Criteo||{},h.Criteo.events=h.Criteo.events||[],new e(function(e,p){h.Criteo.events.push(function(){var b,d=h.Criteo;d.RequestBids({placements:[{slotid:i,zoneid:parseInt(c),nativeCallback:function(d){if(l&&m(d.advertiser.domain,l))p({msg:"Domain is in blacklist"});else{var f=n("chb",c);j[f]=d,k[f]=a,e(f+o([b,d.advertiser.domain]))}}}]},function(a){a&&g.isObjectLike(a)&&0!==a.length?g.forEach(a,function(a,c){if(a.impressionId==i){var e=a.cpm.toString(),f=e.indexOf(".");b=e.substring(0,f+5),d.RenderAd(a.id,h.document)}}):p({msg:"No CHB data"})},f+1e3)}),d.loadJSFile(b,h),setTimeout(function(){e(n("chb",c)+o([0,f]))},f)})},v=function(a){var b=d.generateKey(10),c=a.url+"&cb="+b,f=a.requestWait,g={1:2,2:4,3:2,4:4,5:4,6:4};return new e(function(e,i){h[b]=function(b){if(clearTimeout(l),b.totalAds>0){var c=n("oath","");j[c]=b,k[c]=a,e(c+o([g[b.totalAds]]))}else i({msg:"No Oath data"})},d.loadJSFile(c,h);var l=setTimeout(function(){i({msg:"Oath timeout"})},f||3e4)})},w=function(a){var c=d.generateKey(10),f=a.url+"&cb="+c,i=a.requestWait;return f=g.template(f)(a),new e(function(e,g){h[c]=function(c){if(clearTimeout(l),c.totalAds==b.service[0].parameters.q){var d=n("gemini",a.adUnitCode);j[d]=c,k[d]=a,e(d)}else g({msg:"It expected "+b.service[0].parameters.q+" ads but received "+c.totalAds})},h.callback||(h.callback=function(a){g({msg:a.error})}),d.loadJSFile(f,h);var l=setTimeout(function(){g({msg:"Gemini timeout"})},i||3e4)})},x=function(a){return new e(function(b,c){void 0!==a&&-1!=a.indexOf("=")?b(a):c({msg:"Invalid RTA value"})})},y=function(a,b){var c=!!h.rmnsel;return c&&b&&h.rmnsel.request(b,{service:a,timeout:1e4,cookieExpiration:15}),new e(function(a,d){c&&h.rmnsel.get(b)?a("rmn"+b+"=1"):d({msg:"No RMN targets"})})},z=function(a){return new e(function(b,c){a.then(b,b)})};this.getTargets=function(){var b=[];return g.forEach(a,function(a,d){switch(d){case"oath":b.push(z(v(a)));break;case"gemini":b.push(z(w(a)));break;case"chb":b.push(z(u(a)));break;case"idg":b.push(z(s(a)));break;case"idd":b.push(z(t(a)));break;case"criteoEndPoint":if(!c.isDisabled()){for(var f,h=[],i=0;i<a.zoneId.length;i++)f=z(p(a,a.zoneId[i])),b.push(f),h.push(f);e.all(h).then(function(b){g.every(b,c.isEmpty)&&c.disableTarget(a.disableTime)})}break;case"criteoRta":b.push(z(x(a.value)));break;case"rmn":b.push(z(y(a.url,a.rmnTag)));break;case"custom":a=a.split?a.split():a;for(var i=0;i<a.length;i++)b.push(z(new e(function(b,c){b(a[i]+"=1")})))}}),e.all(b)},this.getConfig=function(a){return a?k[a]:null},this.getData=function(a){return a?j[a]:null}};b.exports=h},{"./lo":38,"./target-disabler":63,"./utils":71,lie:8}],65:[function(a,b,c){"use strict";var d=a("./format-model"),e=function(a,b){d.apply(this,arguments);var c=this,e=function(){return b.fs+"files/byr/"+c.buyerId+".css"};this.config=b,this.css=b.byrCss?e():"",this.url=b.fs+"files/byr/"+a.byr+".js",this.buyerId=a.byr,this.vImpEventUrl=c.buildEventUrl("vimp"),this.vTimeEventUrl=c.buildEventUrl("vtime",{v:"[time]"})};b.exports=e},{"./format-model":29}],66:[function(a,b,c){"use strict";var d=a("./format-model"),e=function(a,b,c,e,f){d.apply(this,arguments);var g=this,h=f.getConfig(g.trg);this.hasDesign=!1,this.content=f.getData(g.trg),this.config=b,this.buyerId=a.byr,this.getWidth=function(){return h.width},this.getHeight=function(){return h.height},this.vImpEventUrl=g.buildEventUrl("vimp"),this.vTimeEventUrl=g.buildEventUrl("vtime",{v:"[time]"})};b.exports=e},{"./format-model":29}],67:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./dom");b.exports=function(a,b){
var c=a.config,g=c.placement,h='<!doctype html><html><head></head><body style="overflow:hidden"><%=bodyContent%></body></html>',i='<script type="text/javascript"><%=content%><\/script>',j='<script src="<%=url%>" type="text/javascript"><\/script>';c.placement.unCloakTagFrame();var k=function(){var b=d.createBorderlessIframe(g.formatElement.ownerDocument,a.contentType);g.formatElement.appendChild(b),b.contentWindow.document.write(e.template(h)({bodyContent:a.url?e.template(j)({url:a.url}):e.template(i)({content:a.content})})),b.contentWindow.document.close(),f(b).css({width:a.getWidth()+"px",height:a.getHeight()+"px"}),c.insertInTop&&f(b.parentNode).css({width:"100%",textAlign:"center"}),c.byrCss&&d.loadCSSFile(a.css,g.rootElement.contentWindow,null),g.viewableElement=d.getOuterAccessibleFrame(g.rootElement.contentWindow)},l=function(){d.loadJSFile(a.url,d.getTopAccessWindow())},m=function(){d.loadJSFile(a.url,g.tagWindow)};return{type:"third-party",render:function(b){if(c.logger.info("Render third-party-view"),"third-party-buyer"==a.contentType)k();else if("passback"==a.contentType)switch(a.passbackMode){case"in-iframe":k();break;case"in-top":l();break;case"in-place":default:m()}else"third-party-display"==a.contentType&&k();g.targetNode.catch(function(a){c.logger.warn(a)})}}}},{"./dom":23,"./lo":38,"./utils":71}],68:[function(a,b,c){"use strict";var d=a("./signal.js"),e=function(a,b){var c,e,f=this,g=0,h=0,i=function(){return Math.round(performance.now())},j=function(){var b=i(),d=b-c;a&&d>15*a&&(d=a),g+=d,h+=d,c=b};this.reset=function(){g=0,c=i()},this.getElapsedTime=function(){return f.isRunning&&j(),b&&g>=b?b:g},this.getPartialTime=function(){return f.isRunning&&j(),b&&h>=b?b:h},this.start=function(){f.isRunning||(f.onStart.dispatch(),h=0,c=i(),f.isRunning=!0,a&&(e=setInterval(function(){j(),f.tick.dispatch()},a)))},this.stop=function(){f.isRunning&&(clearInterval(e),f.isRunning=!1,f.onStop.dispatch())},this.isRunning=!1,this.onStop=new d(!0),this.onStart=new d(!0),this.tick=new d(!0)};!function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-a}}}(),b.exports=e},{"./signal.js":58}],69:[function(a,b,c){"use strict";var d=a("./timer"),e={Tick:function(){var a,b=this,c=new d,e=!1;c.start(),this.setTick=function(d){c.reset(),e=!0,a=setInterval(function(){e&&b.onTick(c.getElapsedTime())},d)},this.clearTick=function(){e=!1,clearInterval(a)}},Functions:{getIdentity:function(){return function(a){return a}},getHyperbola:function(a){a=isFinite(a)?a:7;var b;b=a>0?function(b){return-1/(b+1/a)+a}:a<0?function(b){return-1/(b-1+1/a)+a/(1-a)}:e.Functions.getIdentity();var c=b(1);return function(a){return b(a)/c}},getNormalizedExtern:function(a,b){var c={easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*(a*a*((1+(e*=1.525))*a-e))+b:c/2*((a-=2)*a*((1+(e*=1.525))*a+e)+2)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeOutCubic:function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},easeOutQuart:function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b}};return function(d){return c[a](d,0,1,1,b)}}},Player:function(){var a,b,c,d,f=this,g=!1,h=new e.Tick,i=[],j=function(){h.clearTick(),g=!1,f.onStop()},k=function(a){if(0===i.length)j();else{var c=i.shift();n(a,b,c),b=c,0===c.timeSpan&&d(a)}},l=function(a){c=a,f.onFrame(a.values)},m=function(a,b,c){return a+c*(b-a)},n=function(b,c,e){var f=c.values,g=e.values;for(var h in f)f.hasOwnProperty(h)&&(g[h]=parseFloat(g[h]),isNaN(g[h])&&(g[h]=f[h]));d=function(c){var d,h={};if(c<b+e.timeSpan){var i=a((c-b)/e.timeSpan);for(d in f)f.hasOwnProperty(d)&&(h[d]=m(f[d],g[d],i));l({timeSpan:0,values:h})}else{for(d in g)g.hasOwnProperty(d)&&(h[d]=g[d]);l({timeSpan:0,values:h}),k(b+e.timeSpan)}}};this.initialize=function(c,d){if(b)for(var f in b.values)b.values.hasOwnProperty(f)&&(c[f]=b.values[f]);i=[],a=d||a||e.Functions.getHyperbola(),b={timeSpan:0,values:c}},this.addKey=function(a,b){i.push({timeSpan:a,values:b})},this.gotoKey=function(a,c,d){f.initialize(b.values,d),f.addKey(a,c),f.start()},this.start=function(){f.stop(),h.setTick(Math.ceil(25)),g=!0,k(0)},this.stop=function(){g&&(h.clearTick(),b=c||b,g=!1)},this.isPlaying=function(){return g},this.onFrame=function(a){},this.onStop=function(){},h.onTick=function(a){d(a)}}};b.exports=e},{"./timer":68}],70:[function(a,b,c){"use strict";var d=a("./stored-user-data"),e=a("./lo"),f=function(a){var b=a.hadInitiatedVisible?"iv":"inv",c=new d({name:"vr"+a.name+b,separator:"",maxRecords:a.vRateMaxRecords,expirationDays:a.expirationDays}),f=new d({name:"vt"+a.name,separator:",",maxRecords:a.vTimeMaxRecords,expirationDays:a.expirationDays}),g=function(b){return b.length>0&&b.length>=a.vRateMinRecords?Math.round(e.reduce(b,function(a,b){return a+parseInt(b,10)})/b.length*100):null},h=function(b){return b.length>0&&b.length>=a.vTimeMinRecords?Math.round(e.reduce(b,function(a,b){return a+parseInt(b,10)})/b.length):null},i=g(c.getValues()),j=h(f.getValues());c.addRecord(),this.registerViewableImpression=function(){c.setCurrentValue(1),f.addRecord()},this.updateViewabilityTime=function(a){a>f.getCurrentValue()&&f.setCurrentValue(a)},this.getViewabilityRate=function(){return i},this.getViewabilityTime=function(){return j}};b.exports=f},{"./lo":38,"./stored-user-data":61}],71:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a("./signal"),f=a("./lo"),g=a("lie"),h={};h.buildQuery=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(a[c]||0===a[c])&&(b+=c+"="+a[c]+"&");return b.substring(0,b.length-1)},h.loadJSFile=function(a,b){b=b||window;var c=b.document,d=c.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a);var e=c.head||(c.getElementsByTagName("head").length>0?c.getElementsByTagName("head")[0]:null)||c.body;e.insertBefore(d,e.firstChild)},h.generateKey=function(a,b){for(var c="",d=b||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=0;e<a;e++)c+=d.charAt(Math.floor(Math.random()*d.length));return c},h.generateNumericKey=function(a){return h.generateKey(a,"0123456789")},h.isAccessible=function(a){try{if(a.location.href)return!0}catch(b){}return!1},h.getParent=function(a){return a=a||window,h.isWindow(a.parent)?a.parent:a},h.getTopAccessWindow=function(a){var b,c,d=0;for(b=c=a||window;b!=h.getParent(b)&&d<20;){try{b=h.getParent(b)}catch(e){return a||window}h.isAccessible(b)&&(c=b),d++}return c},h.getFrameElementFromWindow=function(a,b){for(var c=a.document.getElementsByTagName("iframe"),d=0;d<c.length;d++)if(c[d].contentWindow==b)return c[d];return null},h.getOuterAccessibleFrame=function(a){for(var b=a||window,c=h.getParent(b),d=null;c!=b;)h.isAccessible(c)&&(d=h.getFrameElementFromWindow(c,b)),b=c,c=h.getParent(b);return d},h.getNodeWindow=function(a){var b=a.ownerDocument;return b.parentWindow||b.defaultView},h.isWindow=function(a){try{return null!==a&&a===a.window}catch(b){return!0}},h.isDocument=function(a){return a&&9==a.nodeType},h.isElement=function(a){return!!a&&1===a.nodeType&&f.isObjectLike(a)&&!h.isPlainObject(a)},h.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(b)&&(a=parseFloat(RegExp.$1))}return a},h.isIE=function(){return/msie|trident/i.test(navigator.userAgent)},h.getViewportSize=function(a){a=a||window.document;var b,c;return void 0!==a.documentElement&&void 0!==a.documentElement.clientWidth&&0!=a.documentElement.clientWidth&&("CSS1Compat"==a.compatMode||h.getInternetExplorerVersion()>-1)?(b=a.documentElement.clientWidth,c=a.documentElement.clientHeight):(b=a.getElementsByTagName("body")[0].clientWidth,c=a.getElementsByTagName("body")[0].clientHeight),{width:b,height:c}},h.isPageVisible=function(){for(var a=h.getTopAccessWindow(),b=["hidden","mozHidden","msHidden","webkitHidden"],c=0;c<b.length;c++){var d=b[c];if(void 0!==document[d])return!document[d]}return!a.document.hasFocus||a.document.hasFocus()},h.loadCSSFile=function(a,b,c,d){b=b||window,c=c||function(){},d=d||function(){};var e=b.document.createElement("link");if(e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",a),!navigator.userAgent.toLowerCase().match(/^(?!.*chrome).*safari/)&&"onload"in e)e.onload=function(){c()};else if("onreadystatechange"in e)e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||c()};else var f={maxAttempts:200,delay:100},g=0,h=setInterval(function(){if(e.sheet)for(var a=b.document.styleSheets,i=0;i<a.length;i++){var j=a[i],k=j.ownerNode?j.ownerNode:j.owningElement;if(k===e)return c(),void clearInterval(h)}g++>f.maxAttempts&&(d(),clearInterval(h))},f.delay);b.document.getElementsByTagName("head")[0].appendChild(e)},h.extend=function(a,b,c){c=c||{array:"merge",overwrite:!0,deep:!1},a=a||{};for(var d in b)b.hasOwnProperty(d)&&(h.isPlainObject(b[d])&&h.isPlainObject(a[d])?h.extend(a[d],b[d]):f.isArray(b[d])&&f.isArray(a[d])?"concat"==c.array?a[d]=a[d].concat(b[d]):h.extend(a[d],b[d]):c.deep&&f.isArray(b[d])?a[d]=h.extend([],b[d]):c.deep&&h.isPlainObject(b[d])?a[d]=h.extend({},b[d]):!c.overwrite&&a.hasOwnProperty(d)||(a[d]=b[d]));return a},h.type=function(a){var b={};return f.forEach("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a){b["[object "+a+"]"]=a.toLowerCase()}),null===a?a+"":"object"===(void 0===a?"undefined":d(a))||"function"==typeof a?b[b.toString.call(a)]||"object":void 0===a?"undefined":d(a)},h.isPlainObject=function(a){if("object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(b){return!1}return!0},h.adjustIframeSize=function(a,b,c){if(h.isAccessible(a.parent)&&a.frameElement){var d=a.document.body.style;d.overflow="hidden",d.marginLeft=0,d.marginTop=0,7==h.getInternetExplorerVersion()&&(a.document.getElementsByTagName("html")[0].style.overflow="hidden");var e=a.frameElement;e.style.width=b+"px",e.style.height=c+"px",e.style.border=0,e.style.overflow="hidden",e.frameBorder=0,e.marginWidth=0,e.marginHeight=0,e.leftMargin=0,e.topMargin=0,e.border=0}},h.hasAccessibleFrameElement=function(a){return h.isAccessible(a.parent)&&a.frameElement},h.hideNodePersistently=function(a){a.style.display="block",a.style.visibility="hidden",a.style.opacity=0,a.style.position="absolute",a.style.top="-50000px",a.style.left="-50000px",a.style.zIndex="-50000",a.style.width=0,a.style.height=0},h.isSafari=function(){return/Constructor/.test(window.HTMLElement)},h.isFirefox=function(){return"InstallTrigger"in window},h.reloadFontCss=function(a){f.forEach(a.css,function(b,c){-1!=b.indexOf("fonts.google")&&h.loadCSSFile(b,a.placement.formatWindow,function(){a.logger.warn("Font css reloaded")})})},h.trim=function(a){return(a||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},h.parseJSON=function(a){if("string"!=typeof a||!a)return null;a=h.trim(a);try{return window.JSON&&window.JSON.parse?window.JSON.parse(a):new Function("return "+a)()}catch(b){return null}},h.parseIfJson=function(a){return h.parseJSON(a)||a},h.parseQueryParams=function(a){var b={};if(a&&a.split){a.indexOf("?")>-1&&(a=a.slice(a.indexOf("?")+1));for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(2==e.length)try{b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}catch(f){}}}return b},h.toArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},h.inRect=function(a,b,c){return!(a<c.left||a>c.right||b<c.top||b>c.bottom)},h.getScroll=function(a){a=a||h.getTopAccessWindow().document;var b=a.documentElement,c=a.body,d=a.defaultView;return{scrollLeft:Math.max(b.scrollLeft,c.scrollLeft,d?d.pageXOffset:0),scrollTop:Math.max(b.scrollTop,c.scrollTop,d?d.pageYOffset:0)}},h.addEventListener=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!0):a["on"+b]=c},h.removeEventListener=function(a,b,c){a.dettachEvent?a.dettachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!0):a["on"+b]=null},h.decodeHTMLEntities=function(a){a=unescape(a);var b=document.createElement("textarea");return b.innerHTML="&","&amp;"==b.innerHTML?(b.innerHTML=a,b.value):a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})},h.isNear=function(a,b,c){return Math.abs(a-b)<=c},h.getWindow=function(a){return a.defaultView||a.parentWindow},h.toDirectiveName=function(a){return a.replace(/(?:adm)?\-(\w+)/g,function(a,b,c){return c?b.charAt(0).toUpperCase()+b.slice(1):b})},h.msToSec=function(a){return parseInt(Math.round(a/1e3),10)},h.iOSVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}return null},h.noCache=function(a){return a.replace(/\[(timestamp|random|rnd)]/gi,h.generateKey(8))},h.report=function(a,b){var c;f.isFunction(b)||(b=function(){}),f.isString(a)&&(a=[a]),f.forEach(a,function(a){a=h.noCache(a);var d=!1;c=new Image,c.onerror=c.onload=function(){d||(d=!0,b(a))},c.src=a,h.reportHistory.push(c)})},h.reportHistory=[],h.htmlToBase64DataUri=function(a){return"data:text/html;base64,"+window.btoa(a)},h.jsToHtmlBase64DataUri=function(a){return h.htmlToBase64DataUri('<!DOCTYPE html><html><body><script type="text/javascript">'+a+"<\/script></body></html>")},h.isJsToHtmlBase64DataUriSupported=function(){var a=!1;try{var b=document.createElement("iframe");b.src=h.jsToHtmlBase64DataUri('window.location.href = "about:blank"'),document.body.appendChild(b),a="about:blank"==b.contentWindow.location.href}catch(c){}return b.parentNode&&document.body.removeChild(b),a},h.poll=function(a,b){var c=new e(!!b),d=a();b&&c.subscribe(b),d&&c.dispatch();var f=setInterval(function(){var e=a();!d&&e&&(c.dispatch(),b||clearInterval(f)),d=e},50);return c},h.createWatcher=function(a,b){var c,d={status:a(),leading:new e(!0),trailing:new e(!0),watch:function(){c=setInterval(function(){a()!=d.status&&(d.status=!d.status,d[d.status?"leading":"trailing"].dispatch())},b||50)},unwatch:function(){clearInterval(c)}};return d},h.wait=function(a,b,c){return new g(function(d,e){var f=setInterval(function(){var b=a();b&&(d(b),clearInterval(f))},b);h.callIfFunction(c,h,[function(){setTimeout(function(){clearInterval(f),e("Wait rejected")},b)}])})},h.domContentLoaded=function(a,b){"loading"!=a.document.readyState?b():h.addEventListener(a,"DOMContentLoaded",b)},h.cumulativeDelayed=function(a,b){var c,d=!1;return function(){return a()!=d&&(d=!d,c=performance.now()),d&&performance.now()-c>=b}},h.callIfFunction=function(a,b,c){a&&f.isFunction(a)&&a.apply(b,c||[])},h.addDaysToDate=function(a,b){return a.setDate(a.getDate()+b),a},h.addHoursToDate=function(a,b){var c=a.getHours()+b;return a.setDate(a.getDate()+Math.floor(c/24)),a.setHours(c%24),a},h.addMinutesToDate=function(a,b){return a.setTime(a.getTime()+6e4*b),a},h.getProtocol=function(a){return a=a||window,"about:"==a.location.protocol?a.parent.location.protocol:a.location.protocol},h.addProtocolIfNeeded=function(a,b){return/^[a-zA-Z]+:\/\//.test(a)?a:b+a},h.formatCurrency=function(a,b,c,d,e){var f;d?f=parseInt(d):a.replace(/[.|,](\d*)/,function(a,b){f=!b||b.match(/^0*$/)?0:b.length});var g=b||"R$ ",h=e||"",i=c||",",j=parseFloat(a.replace(",",".")).toFixed(f),k=parseInt(j)+"",l=(l=k.length)>3?l%3:0;return g+(l?k.substr(0,l)+h:"")+k.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?i+Math.abs(j-k).toFixed(f).slice(2):"")},h.formatPrice=function(a,b,c){var d="";if(void 0!==a&&null!==a){var e,f=h.decodeHTMLEntities(a),g=[];b?g=b.split("|"):c&&(g=[c]),e=f.match(/(?:R?$ ?)?(\d+[.,]\d*)/)||f.match(/(?:R?$ ?)?(\d+[.,]?\d*)/),d=e?f.replace(/R?\$/g,"").replace(e[1],function(){return g.unshift(e[1]),h.formatCurrency.apply(this,g)}):f}return d},h.isSecure=function(a){return a&&!!a.match(/^https:\/\//)},h.isAbsPath=function(a){return!!a.match(/^\w+:\/\//)},h.getHigherIframe=function(a){var b=h.getWindow(a.ownerDocument);return h.isAccessible(b.parent)&&b.frameElement&&(a=h.getHigherIframe(b.frameElement)),a},h.replaceTokens=function(a,b,c,d){return c=c||"[",d=d||"]",a?a.replace(new RegExp("\\"+c+"([^\\"+c+"\\"+d+"]+)\\"+d,"g"),function(a,c){return b[c]||a}):""},h.getFullDomain=function(a){var b=a.match(/(\w+?:\/\/[\w\W]+?)\//);return b?b[1]:null},h.secureImage=function(a,b,c){return a&&(c&&!a.match(/^(?:http:|https:)?\/\//)&&(a=c+a),"https:"==window.location.protocol&&a.match(/^http:\/\//)&&!a.match(/^https:\/\//)&&(a.match(/\/\/akfs\./)?a=a.replace("http:","https:").replace("//akfs","//s-akfs"):b&&(a=a.replace(/^(?:http:|https:)?\/\//,b)))),a},h.supportHttps=function(a){return"https:"==document.location.protocol?a.replace("http:","https:").replace("//akfs","//s-akfs"):a},h.ajax=function(a,b){return b=b||{},b.method=b.method||"GET",b.responseType=b.responseType||"text",new g(function(c,d){var e=new XMLHttpRequest;e.addEventListener("load",function(){c("xml"==b.responseType.toLowerCase()?e.responseXML:e.responseText)}),e.addEventListener("error",d),e.addEventListener("abort",d),e.withCredentials=!0,e.open("GET",a),e.send()})},h.createBorderlessIframe=function(a,b){var c=a.createElement("iframe");return c.id=b,c.border="0",c.frameBorder="0",c.marginWidth="0",c.marginHeight="0",c.leftMargin="0",c.topMargin="0",c.style.cssText="border: 0; overflow: hidden; width: 0px; height: 0px",c},b.exports=h},{"./lo":38,"./signal":58,lie:8}],72:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./lo"),f=a("./format-model"),g=function(a,b,c,g,h){f.apply(this,arguments);var i=this,j=d.parseIfJson(a.prm)||{},k=b.videoCfg||{},l=i.getClkData(a.clk),m=function(a){var c=i.buildClickUrl(a);return c&&b.clickAudit&&(c=d.noCache(b.clickAudit)+encodeURIComponent(c)),c},n=function(b){return-1!=b.indexOf("http")?b:a.dom+b},o=function(){return h?h.getData(i.trg):null},p=function(b,c){var d=o(),f=e.assign(b,{title:a.tit,eventURL:i.buildEventUrl(null,{c:l.c}),clickTag:m(l),videoSrc:b.res?n(b.res):null,vast:d?(new XMLSerializer).serializeToString(d):null});return e.assign(f,c||{})};i.creativeIds.push(l.c),this.file=k.file||a.file,this.params=p(j,k.params),this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.vImpEventUrl=i.buildEventUrl("vimp"),this.vTimeEventUrl=i.buildEventUrl("vtime",{v:"[time]"})};b.exports=g},{"./format-model":29,"./lo":38,"./utils":71}],73:[function(a,b,c){"use strict";var d=a("./utils.js"),e=a("lie"),f=a("./geometry"),g=function(a,b,c){var g,h=this,i=50,j={area:242500,percentage:50,corrected:30},k=function(){g=d.createWatcher(d.cumulativeDelayed(l,1e3),50),h.onHidden=g.trailing,h.onViewable=g.leading,h.onFirstView=new e(function(a,b){h.onViewable.subscribe(a)})},l=function(){var a=f.getElementRect(b);return!!d.isPageVisible()&&(!c&&a.area>=j.area?f.intersectsViewport(b,j.corrected):f.intersectsViewport(b,c||i))};this.start=function(){d.getNodeWindow(b)!=top?a.logger.info("Can not determine viewability"):(a.onClickProduct.subscribe(function(){h.onViewable.dispatch()}),g.watch())},this.stop=function(){g.unwatch()},k()};b.exports=g},{"./geometry":33,"./utils.js":71,lie:8}]},{},[40]);